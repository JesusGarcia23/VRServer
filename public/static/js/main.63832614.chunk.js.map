{"version":3,"sources":["Components/ThreeMap.js","Components/Likebtn.js","Components/CommentSection.js","Components/Editpost.js","Components/SinglePost.js","Components/Header.js","Components/PostForm.js","Components/user-pages/Signup.js","Components/user-pages/Login.js","Components/EditUser.js","Components/FollowContainer.js","Components/UserProfile.js","Components/Home.js","Components/HomeFeed.js","Components/WorldPost.js","api/service.js","Components/Navbar.js","App.js","serviceWorker.js","index.js"],"names":["ThreeMap","getData","a","url","props","this","then","initThree","camera","scene","renderer","console","log","container","document","getElementById","width","clientWidth","height","clientHeight","THREE","position","z","target","orbitControls","Orbitcontrols","autoRotate","enableZoom","ambi","add","spotLight","set","intensity","load","texture","geometry","Math","pi","scale","material","map","mesh","setClearColor","setPixelRatio","window","devicePixelRatio","setSize","appendChild","domElement","init","animate","requestAnimationFrame","render","style","id","Component","Likebtn","className","onClick","onLike","postId","theIcon","CommentSection","allComments","allPostComments","length","eachComment","textDecoration","to","user","_id","src","imageUrl","borderRadius","alt","username","comment","currentUser","type","placeholder","name","value","onChange","e","updateComment","handleComment","theImageId","Edit","image","exitEdit","class","onSubmit","submitUpdate","caption","handleUpdate","tags","exitFullscreen","theCanvas","getElementsByTagName","addEventListener","socket","SinglePost","match","params","thePost","postValues","filter","eachItem","Fragment","modal","Editpost","handleEdit","onChangeValue","updatePost","goBack","history","owner","marginLeft","marginRight","thePostId","userId","thePostOwner","confirmDelete","checkOwner","preventDefault","ele","myDiv","requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen","theArray","myId","findIndex","theId","handleLike","isLiked","likes","createdAt","Date","toDateString","eachTag","fontSize","key","updateQuery","comments","showConfirm","warning","showCancel","confirmBtnText","confirmBtnBsStyle","cancelBtnBsStyle","confirmBtnCssClass","title","onConfirm","onDelete","onCancel","cancelDelete","PostForm","state","imageFile","redirect","canvasStyle","alignText","canvasContainer","createButton","formStyle","justifyContent","uploadPost","seePreview","files","size","newImg","URL","createObjectURL","changeFile","changeUrl","setState","changePreview","myInput","setAttribute","removePicture","myFileList","removeAttribute","setTimeout","formValues","postMade","message","handleSubmit","htmlFor","React","img","Signup","finished","email","password","Login","EditUser","styling","bio","FollowContainer","users","following","followers","listFollowing","listFollowers","followingList","followingClasses","followerClasses","displayFollowingUsers","theUser","eachUser","indexOf","exitContainer","myUser","handleFollow","isFollowing","showFollowers","UserProfile","images","showEdit","followContainer","theUserId","profileId","pics","test","userFollowers","userDetails","classes","handleShowFollow","handleEditProfile","updateUser","pic","color","Home","HomeFeed","feedList","userList","allPosts","eachPost","sortedList","sort","b","fontWeight","WorldPost","arrayOfPosts","query","theQuery","toLowerCase","join","includes","service","axios","create","baseURL","errorHandler","err","handleUpload","theFile","post","res","data","catch","saveNewThing","newThing","NavBar","notifications","Navbar","bg","variant","expand","Brand","href","Toggle","aria-controls","Collapse","Nav","Link","notif","toWho","NavDropdown","eachNotification","Item","imageTo","fromWho","event","Divider","as","onLogout","Header","endpoint","io","App","imagePost","notifications_collection","postImgUrl","appUrl","herokUrl","lastUrl","profileImgDefault","selectedFile","singlePost","queryInput","syncCurrentUser","file_upload_change","formData","FormData","append","postNewExp","uploadData","response","withCredentials","theNewPost","newPost","clone","push","get_user_data","logoutUser","delete","location","responseFromBack","theIndex","postToFind","get_public_notifications","notification","changingData","emit","get_data_torender","posts","updateForm","currentTarget","changeImgUrl","makeNewUser","theData","loginUser","responseFromServer","userDoc","alert","undefined","get_notifications","split","imageList","captionToUse","tagToUse","finalArray","put","theValues","handleDelete","postArray","splice","responseFromBackend","editPost","theValue","postList","tagsArray","showEditUser","listUsers","reload","userToFollow","user1","user2","theIndex1","userToFind","theIndex2","newComment","showFollow","innerHTML","theChoice","updateQueryBar","theTag","on","get","actualUrl","exact","path","renderPosts","worldRender","myUrl","onUserChange","Boolean","hostname","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.63832614.chunk.js","sourcesContent":["import \"../App.css\";\r\nimport React, { Component } from \"react\";\r\nimport * as THREE from \"three\";\r\nimport Orbitcontrols from \"three-orbitcontrols\";\r\n\r\n\r\nclass ThreeMap extends Component {\r\n  // state = {\r\n  //   picture: \"\"\r\n  // };\r\n\r\n  async componentDidMount() {\r\n\tawait this.getData()\r\n\t.then(()=>{\r\n       this.initThree()\r\n\t})\r\n  }\r\n\r\n  // GETS DATA FROM STATE\r\n  getData = async () => {\r\n    const {url} = this.props\r\n    if(url){\r\n    // await axios.get(\"http://localhost:5000/api/upload\").then(response => {\r\n    //   this.setState({\r\n    //     picture: response.data\r\n    //   });\r\n    //  });\r\n    }\r\n    return url\r\n  };\r\n  \r\n\r\n\r\n\r\n\r\n  initThree() {\r\n    const {url} = this.props\r\n    console.log(\"MY URL\");\r\n    console.log(url);\r\n   // let stats;\r\n    let camera, scene, renderer;\r\n   // let group;\r\n    let container = document.getElementById(\"WebGL-output\");\r\n    let width = container.clientWidth,\r\n      height = container.clientHeight;\r\n\r\n   \r\n    init();\r\n    \r\n\r\n    animate();\r\n\r\n    function init() {\r\n      scene = new THREE.Scene();\r\n      // group = new THREE.Group();\r\n      // scene.add( group );\r\n\r\n      camera = new THREE.PerspectiveCamera(75, width / height, 1, 1000);\r\n      // camera.position.x = -10;\r\n      // camera.position.y = 15;\r\n      camera.position.z = 1;\r\n      camera.target = new THREE.Vector3(0, 0, 0);\r\n      // camera.lookAt( scene.position );\r\n\r\n      //TO CONTROL THE IMAGE MOVEMENT\r\n      let orbitControls = new /*THREE.OrbitControls*/ Orbitcontrols(camera, container);\r\n      orbitControls.autoRotate = false;\r\n      orbitControls.enableZoom = false;\r\n      // let clock = new THREE.Clock();\r\n      //THE AMBIENT LIGHT\r\n      let ambi = new THREE.AmbientLight(0x686868);\r\n      scene.add(ambi);\r\n\r\n      let spotLight = new THREE.DirectionalLight(0xffffff);\r\n      spotLight.position.set(550, 100, 550);\r\n      spotLight.intensity = 0.6;\r\n\r\n      scene.add(spotLight);\r\n      // Texture\r\n      let loader = new THREE.TextureLoader();\r\n      \r\n   \r\n      loader.load(url, function(texture) {\r\n        // let geometry = new THREE.SphereGeometry( 200, 20, 20 );\r\n        //100, 32, 32\r\n        let geometry = new THREE.SphereGeometry(500, 60, Math.pi * 2);\r\n        geometry.scale(-1, 1, 1);\r\n        let material = new THREE.MeshBasicMaterial({ map: texture });\r\n        let mesh = new THREE.Mesh(geometry, material);\r\n        scene.add(mesh);\r\n      });\r\n    \r\n      renderer = new THREE.WebGLRenderer();\r\n      renderer.setClearColor(0xffffff);\r\n      renderer.setPixelRatio(window.devicePixelRatio);\r\n      renderer.setSize(width, height);\r\n      container.appendChild(renderer.domElement);\r\n      // stats = new Stats();\r\n      // container.appendChild( stats.dom );  //Increase status information\r\n    }\r\n\r\n    function animate() {\r\n      requestAnimationFrame(animate);\r\n      render();\r\n      // stats.update();\r\n    }\r\n    function render() {\r\n      renderer.render(scene, camera); \r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n    \r\n    <div>  \r\n\r\n      {/* <h4>\r\n      <Link href=\"/details\">Details</Link>\r\n      </h4> */}\r\n\r\n        <div\r\n          style={{\r\n            height: this.props.height,\r\n            width: this.props.width,\r\n          }}\r\n          id=\"WebGL-output\"\r\n         \r\n        />\r\n         \r\n        \r\n\r\n        </div>\r\n       \r\n    );\r\n  }\r\n}\r\n\r\nexport default ThreeMap;\r\n","import React from 'react';\r\n\r\nconst Likebtn = (props) => {\r\n    console.log(props)\r\n    return (\r\n        <button className=\"likeBtn\" onClick={() => props.onLike(props.postId)}><i className={props.theIcon}></i></button>\r\n    )\r\n}\r\n\r\nexport default Likebtn\r\n\r\n","import React from 'react';\r\nimport {Link} from 'react-router-dom'\r\n\r\nconst CommentSection = (props) => {\r\n    // console.log(\"LIST COMMENT\")\r\n    // console.log(props.allPostComments)\r\n    \r\n    const commentList = (allComments) => {\r\n        console.log(allComments)\r\n        if(allComments.length !== 0){\r\n        return (\r\n          <div className=\"CommentsContainer\">\r\n          {allComments.map(eachComment => {\r\n            return (\r\n              <div className='single-comment'>\r\n              <Link style={{textDecoration: 'none'}} to={`/profile/${eachComment.user._id}`}>\r\n              <span className='userCommentName'><img src={`${eachComment.user.imageUrl}`} style={{width:\"30px\", height:\"30px\", borderRadius:50, 'margin-left':'20px'}} alt='commentPicUser' ></img> {eachComment.user.username} </span>\r\n              </Link>\r\n              <span className='the-comment'>{eachComment.comment}</span>\r\n              </div>\r\n              )\r\n          })}\r\n          </div>\r\n        )\r\n    }else{\r\n        return (<div>THERE ARE NOT COMMENTS YET</div>)\r\n    }\r\n      }\r\n\r\n    return (\r\n        <div>\r\n        {props.allPostComments && commentList(props.allPostComments)}\r\n        {props.currentUser && \r\n            <div>\r\n            <input type='text' placeholder=\"Write a comment....\" name='comment' className='commentInput' value={props.comment} onChange={e => {props.updateComment(e)}}></input>\r\n        <button onClick={e => {props.handleComment(e, props.postId)}}>Post</button>\r\n            </div> }\r\n     \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CommentSection","import React from 'react'\r\n\r\nlet theImageId = ''\r\nconst Edit = (props) => {\r\n    const { image } = props\r\n    if(image){\r\n        theImageId = image._id \r\n    }\r\n    console.log(theImageId)\r\nreturn (\r\n    <div className='editUserFormContainer'>\r\n    <div className='editPostHeader'>\r\n    <h2>Update your Post</h2>\r\n    <button onClick={e => {props.exitEdit(e, theImageId)}} className='exitBtnEditUser'><i class=\"fas fa-times\"></i></button>\r\n    </div>\r\n            <form onSubmit={e => props.submitUpdate(e, image)} >\r\n               <h3>Caption</h3>\r\n                <textarea type=\"text\" name=\"caption\" placeholder={image.caption} className='captionFormPost' value={props.caption} onChange={e => props.handleUpdate(e)} />\r\n                <h2>Tags</h2>\r\n                <input type=\"text\" name=\"tags\" placeholder={image.tags} className='tagsFormPost' value={props.tags} onChange={e => props.handleUpdate(e)} />\r\n             \r\n                <button className=\"btn btn-sm btn-success\">Save Changes</button>\r\n            </form>\r\n        </div>\r\n)\r\n}\r\n\r\nexport default Edit","import React from 'react';\r\nimport ThreeMap from './ThreeMap';\r\nimport Likebtn from './/Likebtn';\r\nimport CommentSection from './CommentSection';\r\nimport { Link } from 'react-router-dom';\r\nimport SweetAlert from 'react-bootstrap-sweetalert';\r\nimport Editpost from './Editpost'\r\n\r\nlet height = \"50vh\"\r\nlet width = \"100vw\"\r\nvar requestFullscreen = function (ele) {\r\n  if (ele.requestFullscreen) {\r\n    ele.requestFullscreen();\r\n  } else if (ele.webkitRequestFullscreen) {\r\n    ele.webkitRequestFullscreen();\r\n  } else if (ele.mozRequestFullScreen) {\r\n    ele.mozRequestFullScreen();\r\n  } else if (ele.msRequestFullscreen) {\r\n    ele.msRequestFullscreen();\r\n  } else {\r\n    console.log('Fullscreen API is not supported.');\r\n  }\r\n};\r\n\r\n\r\nvar exitFullscreen = function () {\r\n  let theCanvas = document.getElementsByTagName('canvas')[0];\r\n  console.log(theCanvas);\r\n  if (theCanvas.style.height === \"100vh\") {\r\n    theCanvas.style.height = \"50vh\"\r\n  } else {\r\n    theCanvas.style.height = \"100vh\"\r\n  }\r\n};\r\n\r\nwindow.addEventListener('fullscreenchange', exitFullscreen);\r\nwindow.addEventListener('webkitfullscreenchange', exitFullscreen);\r\nwindow.addEventListener('mozfullscreenchange', exitFullscreen);\r\nwindow.addEventListener('MSFullscreenChange', exitFullscreen);\r\n\r\nconst SinglePost = props => {\r\n\r\n  console.log(\"this is signle post\", props)\r\n\r\n\r\n  function goBack() {\r\n    const { goBack } = props.history\r\n    goBack();\r\n  }\r\n\r\n  function isLiked(value, theArray, postId) {\r\n    if (value) {\r\n      const myId = value._id;\r\n      //  console.log(theArray)\r\n      //  console.log(theArray.findIndex(theId => theId._id === myId))\r\n      if (theArray.findIndex(theId => theId._id === myId) >= 0) {\r\n        return (<Likebtn onLike={props.handleLike} postId={postId} theIcon=\"fas fa-heart likeIcon\" />)\r\n      } else {\r\n        return (<Likebtn onLike={props.handleLike} postId={postId} theIcon=\"far fa-heart likeIcon\" />)\r\n      }\r\n    }\r\n  }\r\n\r\n  const fullScreen = (e) => {\r\n    e.preventDefault();\r\n    let myDiv = document.getElementById('WebGL-output');\r\n    requestFullscreen(myDiv)\r\n  }\r\n\r\n  //GET THE POST CREATION DATE\r\n  const postTime = (e) => {\r\n    return new Date(e).toDateString()\r\n  }\r\n\r\n  //CHECK USER WITH THE POST\r\n  const checkOwner = (thePost, user) => {\r\n    let thePostId = ''\r\n    let userId = ''\r\n    let thePostOwner = ''\r\n    if (user)\r\n      userId = user._id;\r\n    if (thePost) {\r\n      thePostId = thePost._id\r\n      thePostOwner = thePost.owner._id\r\n    }\r\n    if (userId === thePostOwner) {\r\n      return <div className='editOrDeletePost'><i className=\"fas fa-edit editIcon\" onClick={e => { props.handleEdit(e, thePostId) }}></i> <i className=\"fas fa-trash-alt deleteIcon\" onClick={e => props.confirmDelete()}></i></div>\r\n    }\r\n  }\r\n\r\n  //   console.log(\"PROPS!\")\r\n  // console.log(props)\r\n  const id = props.match.params.id\r\n\r\n  const theArr = props.postValues.filter(eachItem => {\r\n    return eachItem._id === id\r\n  })\r\n\r\n  const thePost = theArr[0];\r\n\r\n  if (thePost) {\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"singlePost\">\r\n          {thePost.modal &&\r\n            <div className='editUserProfileContainer'>\r\n              <Editpost exitEdit={props.handleEdit} image={thePost} handleUpdate={props.onChangeValue} submitUpdate={props.updatePost}></Editpost>\r\n            </div>}\r\n          <div className=\"singlePostHeader\">\r\n            <button className='goBack-btn' onClick={goBack}><i class=\"fas fa-arrow-left\"></i></button>\r\n            <img src={thePost.owner.imageUrl} style={{ width: \"65px\", height: \"65px\", borderRadius: 50, marginLeft: 30, marginRight: 30 }} alt=\"miniProfilePic\"></img>\r\n            <Link style={{ textDecoration: 'none' }} to={`/profile/${thePost.owner._id}`}>{thePost.owner.username}</Link>\r\n            {checkOwner(thePost, props.currentUser)}\r\n          </div>\r\n          <div>\r\n            <ThreeMap url={thePost.image} height={height} width={width} />\r\n          </div>\r\n          <button onClick={fullScreen} className='expandBtn'><i class=\"fas fa-expand-arrows-alt expandIcon\"></i><div className='expandText'>Expand</div></button>\r\n          <div className=\"singleFooter\">\r\n\r\n            <div className=\"singleLikes\">\r\n\r\n              <div className='like-counter'>\r\n                {isLiked(props.currentUser, thePost.likes, thePost._id)}\r\n                <span className='likeCount'>{thePost.likes.length} Likes</span>\r\n              </div>\r\n\r\n              <div className='post-date'>\r\n                {postTime(thePost.createdAt)}\r\n              </div>\r\n            </div>\r\n\r\n            <div className='postCaption'>\r\n              {thePost.caption}\r\n              <div className='tagName'>\r\n                {thePost.tags.map(eachTag => {\r\n                  return <Link to='/world' style={{ fontSize: 20 }} key={eachTag} onClick={e => props.updateQuery(eachTag)}>#{eachTag} </Link>\r\n                }\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              {<CommentSection currentUser={props.currentUser} comment={props.comment} allPostComments={thePost.comments} updateComment={props.onChangeValue} handleComment={props.handleComment} postId={thePost._id} />}\r\n            </div>\r\n\r\n          </div>\r\n\r\n          {props.showConfirm === true &&\r\n            <SweetAlert\r\n              warning\r\n              showCancel\r\n              confirmBtnText=\"Confirm!\"\r\n              confirmBtnBsStyle=\"danger\"\r\n              cancelBtnBsStyle=\"default\"\r\n              confirmBtnCssClass=\"confirmDelete\"\r\n              title=\"Are you sure?\"\r\n              onConfirm={e => props.onDelete(thePost._id)}\r\n              onCancel={e => props.cancelDelete()}\r\n            >\r\n              Do you want to delete this post?\r\n             </SweetAlert>\r\n          }\r\n\r\n\r\n        </div>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n  return (\r\n    <div>OH NO!</div>\r\n  )\r\n\r\n\r\n\r\n}\r\n\r\nexport default SinglePost;\r\n\r\n// {thePost.tags.map(eachTag => {\r\n//   return <Link to='/world' style={{fontSize:20}} key={eachTag} onClick={e => props.updateQuery(eachTag)}>#{eachTag} </Link>\r\n// }\r\n//   )}","import React, { Component } from 'react';\r\nimport io from 'socket.io-client'\r\n\r\nvar socket\r\nclass Header extends Component {\r\n\r\n    constructor() {\r\n        super()\r\n        this.state = {\r\n            endpoint: 'http://localhost:5000'\r\n        }\r\n        socket = io(this.state.endpoint)\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            null\r\n        );\r\n    }\r\n}\r\n\r\nexport { Header, socket };","import React from 'react';\r\nimport ThreeMap from './ThreeMap';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\n\r\nclass PostForm extends React.Component{\r\n\r\n    \r\n     state = {\r\n    imageUrl: \"\",\r\n    imageFile: [],\r\n    redirect: false,\r\n\r\n\r\n    }\r\n\r\n    componentDidMount(){\r\n        setTimeout(() => {\r\n            this.setState({redirect: true})}, 2000)\r\n    }\r\n\r\n    //STYLING \r\n    canvasStyle = {\r\n        height: \"38vh\",\r\n        width: \"77vw\"\r\n    }\r\n\r\n    height = \"38vh\"\r\n    width = \"78.95vw\"\r\n\r\n    style = {\r\n        \"display\": \"block\",\r\n        \"margin-top\": \"100px\",\r\n        \"margin-left\": \"auto\",\r\n        marginRight: \"auto\",\r\n        \"max-width\": \"600px\",\r\n        \"height\": \"300px\",\r\n        alignText: \"center\",\r\n        \"border\": \"1px solid black\"\r\n    }\r\n\r\n    canvasContainer = {\r\n        \"display\": \"block\",\r\n        \"border\": \"8px solid gray\", \r\n        'border-radius': '10px',\r\n        \"margin\": \"5px auto\",\r\n        height: \"40vh\",\r\n        width: \"80vw\"\r\n    }\r\n\r\n    createButton = {\r\n        \"display\": \"block\",\r\n        \"margin\": \"auto\"\r\n\r\n    }\r\n\r\n    formStyle = {\r\n        justifyContent: \"center\",\r\n        alignText: \"center\"\r\n    }\r\n\r\n// END OF STYLING\r\n\r\n    uploadPost = (e) => {\r\ne.preventDefault();\r\nconsole.log(e.target);\r\n    }\r\n\r\n    seePreview = (e) => {\r\n        e.preventDefault();\r\n\r\n        console.log(e.target.files);\r\n        if(e.target.files[0] && e.target.files[0].size <= 10485760){\r\n        let newImg = URL.createObjectURL(e.target.files[0])\r\n        this.props.changeFile(e.target.files[0])\r\n        this.props.changeUrl(newImg)\r\n    \r\n        this.setState({\r\n            imageUrl: newImg,\r\n            imageFile: e.target.files[0]})\r\n\r\n        this.changePreview(newImg)\r\n        \r\n        let myInput = document.getElementById('myFileList')\r\n        myInput.setAttribute('disabled', true);\r\n        myInput.className = \"inputDisabled\"\r\n    }else{\r\n        this.props.changeFile(e.target.files[0])\r\n    }\r\n    }\r\n\r\n    changePreview = (value) => {\r\n    \r\n        return (\r\n         \r\n            <div style={this.canvasStyle}>\r\n            {this.state.imageUrl && <ThreeMap url={value} height={this.height} width={this.width}/>}\r\n            </div>\r\n        \r\n        )\r\n   \r\n    }\r\n\r\n    // changeText = (e) =>{\r\n    //     this.setState({\r\n    //         [e.currentTarget.name]: e.currentTarget.value\r\n    //     })\r\n    // }\r\n\r\n    removePicture = (e) => {\r\n       e.preventDefault();\r\n        let myFileList = document.getElementById('myFileList');\r\n        myFileList.removeAttribute('disabled');\r\n        myFileList.value = null\r\n        myFileList.className = \"inputfile\"\r\n        this.setState({imageUrl: \"\",\r\n        imageFile: []\r\n    })\r\n    }\r\n\r\n    render(){\r\n        const {caption, tags, currentUser, postMade} = this.props.formValues\r\n        if(currentUser && !postMade){\r\n        return(\r\n            <div className=\"formPost\">\r\n            <h1>New Experience</h1>\r\n            {this.props.formValues.message}\r\n            <form style={this.formStyle} onSubmit={this.props.handleSubmit}>\r\n            \r\n            <div className='canvasAndFileContainer'>\r\n            <div className='borderCanvasPost'>\r\n            <span style={this.canvasContainer} id=\"myCanvasContainer\">\r\n            {this.changePreview(this.state.imageUrl)}\r\n            </span>\r\n            </div>\r\n            </div>\r\n            \r\n            <div className='fileHandlePostForm'>\r\n\r\n            <span className='chooseFileBtnContainer'>\r\n            <input type=\"file\" onChange={this.seePreview} id=\"myFileList\" className=\"inputfile\"></input>\r\n            <label htmlFor=\"myFileList\"> <span className='inputFileText'>Choose a file</span> <span className='inputFileText'>|</span><i class=\"fas fa-upload uploadIcon\"></i></label>\r\n            </span>\r\n          \r\n            <span className='fileSizeText'>(File size max 10 Mb)</span>\r\n\r\n            <span className='removeBtnContainer'>\r\n            <button onClick={this.removePicture} className=\"removeBtn\"> <span className='inputFileText'>REMOVE</span> <span className='inputFileText'>|</span><i class=\"fas fa-redo redoIcon\"></i></button>\r\n            </span>\r\n\r\n            </div>\r\n           \r\n           <div className='mainPostFormContainer'>\r\n           <span className='captionContainerPostForm'>\r\n           <span className=\"tagsTitle\">Caption: </span>\r\n           <textarea className='captionPostForm' type=\"text\" value={caption} onChange={ e => this.props.onChangeValue(e)} name=\"caption\" ></textarea>\r\n           </span>\r\n           <span className=\"tagTitleAndTextarea\">\r\n           <span className=\"tagsTitle\">Tags: </span>\r\n           <textarea className='tagsPostForm' type=\"text\" value={tags} onChange={ e => this.props.onChangeValue(e)} name=\"tags\" placeholder=\"e.g: #Beach #Sun #Ocean\"></textarea>\r\n           </span>\r\n           </div>\r\n\r\n            <button className='createNewPost' style={this.createButton}>CREATE NEW EXPERIENCE</button>\r\n            </form>\r\n\r\n            <div>\r\n          \r\n            </div>\r\n            </div>\r\n        )\r\n    }else if(currentUser && postMade){\r\n       return( <Redirect to='/world'/> )\r\n    }else if(this.state.redirect){\r\n        return( <Redirect to='/login'/> )\r\n    }else{\r\n        return (<div>LOADING...</div>)\r\n    }\r\n    }\r\n\r\n}\r\n//<img src={this.state.imageUrl} alt=\"Choose a file\" height=\"300px\" width=\"500px\"></img>\r\nexport default PostForm;","import React from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\n// import the service file since we need it to send (and get) the data to(from) server\r\n\r\nlet img = \"\"\r\n\r\nclass Signup extends React.Component{\r\n\r\n \r\n     finished = false;\r\n\r\n\r\n    seePreview = (e) => {\r\n        e.preventDefault();\r\n        console.log(e.target.files[0]);\r\n        if(e.target.files[0].size <= 10485760){\r\n        let newImg = URL.createObjectURL(e.target.files[0])\r\n        img = newImg;\r\n        this.props.changeFile(e.target.files[0])\r\n    }\r\n        // this.setState({imageFile: e.target.files[0]})\r\n\r\n    }\r\n\r\n\r\n    render(){\r\n        console.log(this.props);\r\n        const {username, email, password} = this.props.formValues\r\n        if(this.finished || this.props.currentUser){\r\n            return (\r\n                <Redirect to={`/profile/${this.props.currentUser._id}`}/>\r\n            )\r\n        }\r\n        return(\r\n            <div className=\"SignupForm\">\r\n            <section>\r\n            <h2>Sign Up</h2>\r\n            <form onSubmit={this.props.handleSubmit}>\r\n            <label>Username: </label>\r\n            <input type=\"text\" name=\"username\" value={username} onChange={ e => this.props.onChangeValue(e)}></input>\r\n            <label>Email: </label>\r\n            <input type=\"email\" name=\"email\" value={email} onChange={ e => this.props.onChangeValue(e)}></input>\r\n            <label>Password </label>\r\n            <input type=\"password\" name=\"password\" value={password} onChange={ e => this.props.onChangeValue(e)}></input>\r\n            <label>Image </label>\r\n            <input type=\"file\" onChange={this.seePreview} name=\"imageFile\"></input>\r\n            <img src={img} alt=\"Choose a file\"></img>\r\n            <button>Submit</button>\r\n            </form>\r\n            </section>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default Signup;\r\n\r\n   // constructor(props){\r\n    //     super(props);\r\n\r\n    //     this.state={\r\n    //         username: \"\",\r\n    //         email: \"\",\r\n    //         password: \"\",\r\n    //         imageUrl: \"\",\r\n    //         imageFile: [],\r\n    //         finished: false\r\n    //     }\r\n    // }\r\n\r\n    \r\n    // updateValueField = (e) => {\r\n    //     console.log(e.target)\r\n    //     this.setState({\r\n    //         [e.target.name]: e.target.value\r\n    //     })\r\n    // }\r\n\r\n    // makeNewUser = (e) => {\r\n    //     e.preventDefault();\r\n    //     if(this.state.imageFile.length > 0){\r\n    //                //UPLOAD TO CLOUDINARY\r\n    //                const uploadData = new FormData();\r\n    //                uploadData.append(\"imageUrl\", this.state.imageFile);\r\n           \r\n    //                service.handleUpload(uploadData)\r\n    //                .then(response => {\r\n    //                    // console.log('response is: ', response);\r\n    //                    // after the console.log we can see that response carries 'secure_url' which we can use to update the state \r\n    //                    this.setState({ imageUrl: response.secure_url });\r\n\r\n    //                    //CALL TO THE SIGNUP ROUTE\r\n    //                    axios.post('http://localhost:5000/auth/signup', this.state, {withCredentials: true})\r\n    //                    .then(theData => {\r\n    //                        console.log(\"NEW USER!\")\r\n    //                        console.log(theData)\r\n    //                        this.setState({finished: true})\r\n    //                    })\r\n    //                    .catch(err => console.log(err));\r\n               \r\n               \r\n    //                  })\r\n    //                  .catch(err => {\r\n    //                    console.log(\"Error while uploading the file: \", err);\r\n    //                  });\r\n    //                 }else{\r\n                       \r\n    //                    //CALL TO THE SIGNUP ROUTE\r\n    //                    axios.post('http://localhost:5000/auth/signup', this.state, {withCredentials: true})\r\n    //                    .then(theData => {\r\n    //                        console.log(\"NEW USER!\")\r\n    //                        console.log(theData)\r\n    //                        this.setState({finished: true})\r\n    //                    })\r\n    //                    .catch(err => console.log(err));\r\n                \r\n    //                 }\r\n\r\n             \r\n    // }","import React from 'react';\r\nimport { Redirect } from 'react-router-dom'\r\nclass Login extends React.Component {\r\n\r\n    message = null\r\n\r\n    render(){\r\n        const { username, password, currentUser } = this.props.formValues\r\n        if(currentUser){\r\n            return (\r\n                <Redirect to={`/home`}/>\r\n            )\r\n        }else{\r\n        return(\r\n            <div>\r\n            <section>\r\n\r\n            <h2> Login </h2>\r\n\r\n            <form onSubmit ={this.props.handleSubmit} >\r\n\r\n                <label> Username: </label>\r\n                 <input value={username} onChange={ e => this.props.onChangeValue(e)} type=\"text\" name=\"username\" placeholder=\"username\" />\r\n\r\n\r\n\r\n                <label> Password</label>\r\n                <input value={password} onChange={ e => this.props.onChangeValue(e)} type=\"password\" name=\"password\" placeholder=\"***********\"/>\r\n                 <button> Login </button>\r\n\r\n            </form>\r\n\r\n            {/* if the message is not null (basically if there's a message) then show it in this <div> tag */}\r\n\r\n            { this.message && <div> { this.message } </div> }\r\n\r\n        </section>\r\n            \r\n            </div>\r\n        )\r\n    }\r\n    }\r\n}\r\n\r\nexport default Login;\r\n\r\n\r\n    // constructor(props){\r\n    //     super(props);\r\n    //     this.state = {\r\n    //         username: \"\",\r\n    //         password: \"\",\r\n    //         message: null\r\n    //     }\r\n    // }\r\n\r\n    // genericSync(event){\r\n    //     const {name, value} = event.target;\r\n    //     this.setState({[name]: value})\r\n    // }\r\n\r\n    // handleSubmit(event){\r\n    //     event.preventDefault();\r\n\r\n    //     Axios.post('http://localhost:5000/auth/login', this.state, {withCredentials: true})\r\n    //     .then(responseFromServer => {\r\n    //         console.log(responseFromServer.data.userDoc)\r\n    //         const { userDoc } = responseFromServer.data;\r\n    //         this.props.onUserChange(userDoc);\r\n          \r\n    //         alert(\"You are logged in.\")\r\n    //         // return <Redirect to='/profile'/>\r\n    //     })\r\n    //     .catch(err => {\r\n    //         console.log(err)\r\n    //         // if(err.response.data) return this.setState({message: err.response.data.message})\r\n    //     })\r\n    // }","import React from 'react';\r\n\r\nlet img = ''\r\n\r\nconst EditUser = (props) => {\r\n    const { currentUser, styling } = props\r\n    \r\n    function changePicture(e){\r\n        if(img === ''){\r\n           return <img src={currentUser.imageUrl} alt=\"Choose a file\" className='editUserPicture'></img>\r\n        }else{\r\n            return <img src={img} alt=\"Choose a file\" className='editUserPicture'></img>\r\n        }\r\n \r\n    }\r\n\r\n    function seePreview(e){\r\n        e.preventDefault();\r\n        console.log(e.target.files[0]);\r\n        if(e.target.files[0].size <= 10485760){\r\n        let newImg = URL.createObjectURL(e.target.files[0])\r\n        img = newImg;\r\n        props.changeFile(e.target.files[0])\r\n    }\r\n        // this.setState({imageFile: e.target.files[0]})\r\n\r\n    }\r\n\r\n    return(\r\n        <div className={styling}>\r\n        <div className='editUserHeader'>\r\n        <h2>Update your Profile</h2>\r\n        <button onClick={e => {props.exitEdit(e)}} className='exitBtnEditUser'><i class=\"fas fa-times\"></i></button>\r\n        </div>\r\n        <form onSubmit={ e => props.submitUpdate(e, currentUser)}>\r\n        {changePicture()}\r\n       \r\n        <input type='file' onChange={seePreview} className='chooseFileUserEdit'></input>\r\n        \r\n        <textarea type=\"text\" name=\"bio\" placeholder={currentUser.bio} onChange={e => props.handleUpdate(e)} className='editUserCaption' />\r\n        <button>Update profile</button>\r\n        </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default EditUser;","import React from 'react';\r\nimport { Link, Redirect } from 'react-router-dom';\r\n\r\nconst FollowContainer = (props) => {\r\nconsole.log(props)\r\nconst {users, following, followers, listFollowing, listFollowers, currentUser } = props\r\nlet followingList = [];\r\n// let followerList = [];\r\n\r\nlet followingClasses = listFollowing ? 'followingContainerHeaderDark' : 'followingContainerHeader'\r\nlet followerClasses = listFollowers ? 'followerContainerHeaderDark' : 'followerContainerHeader'\r\n\r\nfunction isFollowing(myUser, eachUser){\r\n    console.log(myUser)\r\n    console.log(eachUser)\r\nif(eachUser._id !== myUser._id){\r\n    if(myUser.following.indexOf(eachUser._id) >= 0){\r\n        return <button className=\"btn btn-sm  btn-primary\" onClick={e => props.handleFollow(eachUser._id)}><i className=\"fa fa-user-minus followBtn\"> Unfollow </i></button>\r\n    }else{\r\n        return   <button className=\"btn btn-sm  btn-primary\" onClick={e => props.handleFollow(eachUser._id)}><i className=\"fa fa-user-plus followBtn\"> Follow </i></button>\r\n    }\r\n   \r\n}else{\r\n    return <div></div>;\r\n}\r\n}\r\n\r\nfunction displayFollowingUsers(theArray, theUser){\r\nif(theArray.length > 0 && users.length > 0){\r\n    followingList = users.filter(eachUser => {\r\n        return theArray.indexOf(eachUser._id) >= 0\r\n    })\r\n    console.log(followingList)\r\n    console.log(theUser.following)\r\nreturn followingList.map(eachUser => {\r\n    return <div key={eachUser._id} className='userMiniFollowBox'>\r\n    <span className='followThumbImgName'>\r\n    <img src={eachUser.imageUrl} alt='thumbFollowing' className='pictureFollowList'></img>\r\n    <span onClick={e => {props.exitContainer(e)}}><Link to={`/profile/${eachUser._id}`} className='pictureFollowName' >{eachUser.username}</Link></span>\r\n    </span>\r\n    {theUser && isFollowing(theUser, eachUser)}\r\n    </div>\r\n})\r\n}else{\r\n    return <div>NO USERS!</div>\r\n}\r\n}\r\n\r\n    return (\r\n  \r\n            <div className='editUserFormContainer'>\r\n            <div className='FollowHeader'>\r\n            <span className={followerClasses} onClick={e => props.showFollowers(e, 'followers')}>Followers</span><span className={followingClasses} onClick={e => props.showFollowers(e, 'following')}><span className='followingText'>Following</span> <button onClick={e => {props.exitContainer(e)}} className='exitBtnFollow'><i class=\"fas fa-times\"></i></button> </span>        \r\n            </div>\r\n            <div className='followListContainer'>\r\n            {listFollowing && displayFollowingUsers(following, currentUser)}\r\n            {listFollowers && displayFollowingUsers(followers, currentUser)}\r\n            </div>\r\n\r\n                </div>\r\n  \r\n    )\r\n}\r\n\r\nexport default FollowContainer","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport EditUser from './EditUser'\r\nimport FollowContainer from './FollowContainer'\r\n\r\n//{(theUserId !== profileId) ? <button className='goBackBtn' onClick={goBack}>Go back</button> : ''}\r\n\r\nconst UserProfile = (props) => {\r\n    const { images, currentUser, users, showEdit, followContainer } = props\r\n    const theUserId = currentUser._id\r\n    const profileId = props.match.params.id\r\n    console.log('these are users', users)\r\n    console.log('these is currentUSer', currentUser)\r\n\r\n    console.log(\"THESE ARE THE PROPS\", props)\r\n    console.log('these are the images', images)\r\n    console.log('THERE IS FOLLOWCONTAINER', followContainer)\r\n\r\n    function goBack() {\r\n        const { goBack } = props.history\r\n        goBack();\r\n    }\r\n\r\n    function haveLogout(userFollowers) {\r\n        if (theUserId === profileId) {\r\n            return <div className=\"buttons\" >\r\n                <button onClick={props.handleEditProfile} className='editUserProfileIcon'><i class=\"fas fa-user-edit\"></i></button>\r\n            </div>\r\n        } else {\r\n            console.log(userFollowers)\r\n            console.log(userFollowers.indexOf(theUserId))\r\n            if (userFollowers.indexOf(theUserId) >= 0) {\r\n                return (<button className=\"btn btn-sm  btn-primary\" onClick={e => props.handleFollow(profileId)}><i className=\"fa fa-user-minus followBtn\"> Unfollow </i></button>)\r\n            } else {\r\n                return (<button className=\"btn btn-sm  btn-primary\" onClick={e => props.handleFollow(profileId)}><i className=\"fa fa-user-plus followBtn\"> Follow </i></button>)\r\n            }\r\n        }\r\n    }\r\n\r\n    function havePermission(thePostId) {\r\n        if (theUserId === profileId) {\r\n            return (\r\n                <React.Fragment>\r\n                    <div className='editOrDeletePost'><i class=\"fas fa-edit editIcon\" onClick={e => { props.handleEdit(e, thePostId) }}></i> <i class=\"fas fa-trash-alt deleteIcon\" onClick={e => props.confirmDelete()}></i></div>\r\n                </React.Fragment>)\r\n        } else {\r\n            return;\r\n        }\r\n    }\r\n\r\n    const pics = images.filter(image => image.owner._id === profileId)\r\n\r\n    const test = users.filter(theUser => theUser._id === profileId)\r\n    console.log(\"these are the test\", test)\r\n\r\n    const userDetails = users.filter(theUser => theUser._id === profileId)[0]\r\n\r\n    const classes = showEdit ? 'editUserFormContainer' : 'editUserFormContainer hide'\r\n    if (userDetails) {\r\n        return (\r\n            <div className='profileContainer'>\r\n\r\n                {props.handleShowFollow}\r\n                {followContainer && <div className='followUserContainer'> <FollowContainer users={users} currentUser={currentUser} handleFollow={props.handleFollow} following={userDetails.following} followers={userDetails.followers} listFollowers={props.listFollowers} listFollowing={props.listFollowing} exitContainer={e => props.handleShowFollow(e)} showFollowers={e => props.showFollowers(e)} /> </div>}\r\n                {showEdit && <div className='editUserProfileContainer'>\r\n                    <EditUser exitEdit={props.handleEditProfile} handleUpdate={props.onChangeValue} currentUser={currentUser} submitUpdate={props.updateUser} changeFile={props.changeFile} styling={classes} />\r\n                </div>}\r\n                <div className=\"user-profile\">\r\n                    <span className=\"user-profile-img\">{currentUser && <img src={userDetails.imageUrl} className='userProfileImg' alt=\"profile-img\" />}\r\n                        {haveLogout(userDetails.followers)}\r\n                    </span>\r\n\r\n                    <div className='user-profile-nameAbio'>\r\n                        <div className='user-profile-username'>{userDetails.username}</div>\r\n                        <div className='user-profile-bio'>{userDetails.bio}</div>\r\n                    </div>\r\n\r\n                    <div className='userPostAndFollowers'>\r\n                        <div className='userPostCounter'>\r\n                            <div className='userPostCounterText'>Posts: {pics.length}</div>\r\n                        </div>\r\n                        <div className='userFollowersContainer'>\r\n                            <div className='userFollowers'>\r\n                                <span className=\"followUser\"><button className='followBtnProfile' onClick={e => props.handleShowFollow(e)}>Followers:</button> {userDetails.followers.length}</span>\r\n                            </div>\r\n                            <div className='userFollowers'>\r\n                                <span className=\"followUser\"><button className='followBtnProfile' onClick={e => props.handleShowFollow(e)}>Following:</button> {userDetails.following.length}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n                <div className=\"profilePostContainer\" >\r\n                    {pics && pics.map(pic => {\r\n                        return (\r\n                            <div className=\"profilePost\" key={pic._id} >\r\n                                <div className=\"profileImgContainer\">\r\n                                    <img className=\"profileImg\" src={pic.image} alt=\"worldPic\" width=\"100%\" height=\"300px\" />\r\n                                    <div className=\"profileOverlayContainer\" >\r\n                                        <div className=\"textOverlayProfile\" id={pic._id}>\r\n                                            {havePermission(pic._id)}\r\n\r\n                                            <Link to={`/post/${pic._id}`} style={{ textDecoration: 'none', color: 'white' }}>See the full Post</Link>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </div>\r\n                        )\r\n                    })\r\n                    }\r\n                </div>\r\n                {!pics.length && <p>You dont have any posts </p>}\r\n            </div>\r\n\r\n        )\r\n    } else {\r\n        return (\r\n            <div>LOADING...</div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default UserProfile;","import React from 'react';\r\nclass Home extends React.Component {\r\n\r\n    render(){\r\n        return (\r\n            <div className=\"HomePage\">\r\n            <div className=\"HomeItem HomeItem1\"><div className='HomeText1'>SHARE</div></div>\r\n            <div className=\"HomeItem HomeItem2\"><div className='HomeText2'>YOUR</div></div>\r\n            <div className=\"HomeItem HomeItem3\"><div className='HomeText3'>WORLD</div></div>\r\n        </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Home","import React from 'react';\r\nimport Likebtn from './Likebtn'\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst HomeFeed = props => {\r\n    let feedList = []\r\n    let userList = []\r\nconst {currentUser, allPosts} = props\r\nif(currentUser){\r\n     userList = currentUser.following\r\n    if(allPosts.length){\r\n        feedList = allPosts.filter(eachPost => { return userList.indexOf(eachPost.owner._id) >= 0 || eachPost.owner._id === currentUser._id })\r\n    }\r\n}\r\n\r\nfunction isLiked(value, theArray, postId){\r\n    if(value){\r\n       const myId = value._id;\r\n       if(theArray.findIndex(theId => theId._id === myId) >= 0){\r\n         return( \r\n             <div className='likeContainerHome'> \r\n             <Likebtn onLike={props.handleLike} postId={postId} theIcon=\"fas fa-heart likeIconHome\"/> \r\n             <span>{theArray.length} Likes</span>\r\n             </div>\r\n            )\r\n       }else{\r\n          return(\r\n              <div className='likeContainerHome'>\r\n            <Likebtn onLike={props.handleLike} postId={postId} theIcon=\"far fa-heart likeIconHome\"/>\r\n            <span>{theArray.length} Likes</span>\r\n            </div>)\r\n       }\r\n    }\r\n }\r\n\r\n  //GET THE POST CREATION DATE\r\n  const postTime = (e) => {\r\n    return new Date(e).toDateString()\r\n  }\r\n\r\n //SORT ALL THE IMAGES FROM THE RECENT TO THE OLDEST ONE\r\nconst sortedList = feedList.sort((a, b) => {\r\n    return new Date(b.createdAt) - new Date(a.createdAt)\r\n})\r\n\r\n    if(currentUser !== null){\r\n        return(\r\n            <div>\r\n\r\n            <div>\r\n            {feedList.length > 0 ? sortedList.map(eachPost => {\r\n                return <div className=\"col-s-12 feedPost\" key={eachPost._id} >\r\n            <div className='homePostHeader'>\r\n            <img src={eachPost.owner.imageUrl} style={{width:\"50px\", height:\"50px\", borderRadius:50}} alt=\"miniProfilePic\"></img>\r\n            \r\n           <Link style={{textDecoration: 'none', fontSize:22, marginLeft:15 , fontWeight:'bold', color:'black'}} to={`/profile/${eachPost.owner._id}`}> {eachPost.owner.username}</Link>\r\n            </div>\r\n\r\n            <div className=\"homeImgContainer\">\r\n            <img  className=\"worldImg\" src={eachPost.image}  alt=\"worldPic\" width=\"100%\" height=\"300px\"></img>\r\n\r\n            <div className=\"overlayContainer\" >\r\n\r\n            <div className=\"textOverlay\" id={eachPost._id}>\r\n            {isLiked(props.currentUser, eachPost.likes, eachPost._id)}\r\n            <div className='commentlength-container'>{eachPost.comments.length} Comments</div>\r\n            <Link style={{textDecoration: 'none', color:'white'}} to={`/post/${eachPost._id}`}> \r\n            <div className='fullPostText'>See the full Post</div>\r\n            </Link>\r\n            </div>\r\n            \r\n            </div>\r\n           \r\n            </div>\r\n            <div className='homePostFoot'>\r\n            \r\n            <p>{eachPost.caption}</p>\r\n            <p>{postTime(eachPost.createdAt)}</p>\r\n            </div>\r\n            </div>\r\n            }): <div className='startFollowingContainer'><div className='startFollowingWorldText'>START FOLLOWING PEOPLE\r\n            <p> <Link to='/world' className='seeWorldText'>(EXPLORE WORLD) </Link></p>OR UPLOAD YOUR OWN EXPERIENCES!</div></div>}\r\n            </div>\r\n            </div>\r\n        )\r\n    }else{\r\n        return  <div>LOADING...</div>\r\n    }\r\n\r\n}\r\n\r\nexport default HomeFeed","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Likebtn from './Likebtn';\r\n\r\nconst WorldPost = props => {\r\n\r\n   console.log(props)\r\n   let arrayOfPosts = []\r\n\r\n   function isLiked(value, theArray, postId) {\r\n      if (value) {\r\n         const myId = value._id;\r\n         if (theArray.findIndex(theId => theId._id === myId) >= 0) {\r\n            return (\r\n               <div className='likeContainerWorld'>\r\n                  <Likebtn onLike={props.handleLike} postId={postId} theIcon=\"fas fa-heart likeIconWorld\" />\r\n                  <span>{theArray.length} Likes</span>\r\n               </div>)\r\n         } else {\r\n            return (\r\n               <div className='likeContainerWorld'>\r\n                  <Likebtn onLike={props.handleLike} postId={postId} theIcon=\"far fa-heart likeIconWorld\" />\r\n                  <span>{theArray.length} Likes</span>\r\n               </div>)\r\n         }\r\n      }\r\n   }\r\n   let { query, currentUser } = props\r\n\r\n\r\n   if (query !== '') {\r\n      let theQuery = query.toLowerCase();\r\n      let queryList = props.allPosts.filter(eachPost => { return eachPost.tags.join('').toLowerCase().includes(theQuery) })\r\n      arrayOfPosts = queryList\r\n   } else {\r\n      arrayOfPosts = props.allPosts\r\n   }\r\n\r\n\r\n   if (currentUser && arrayOfPosts.length > 0) {\r\n      return (\r\n\r\n         <div>\r\n            <input type=\"text\" placeholder=\"Search\" onChange={e => { props.onChangeValue(e) }} name='queryInput' className=\"mr-sm-2 worldSearchInput\" />\r\n            <h1>Explore the World</h1>\r\n            <div className=\"worldContainer\">\r\n               {arrayOfPosts && arrayOfPosts.map(image => {\r\n                  return <div className=\"worldPost\" key={image._id} >\r\n                     <div className=\"worldImgContainer\">\r\n                        <img className=\"worldImg\" src={image.image} alt=\"worldPic\" width=\"100%\" height=\"300px\" />\r\n\r\n\r\n                        <div className=\"overlayContainer\" >\r\n                           <div className=\"textOverlayWorld\" id={image._id}>\r\n                              <div className='worldUserOverlay'>\r\n                                 <img src={image.owner.imageUrl} style={{ width: \"70px\", height: \"70px\", borderRadius: 50, marginRight: '1vw' }} alt=\"miniProfilePic\" />\r\n                                 <Link to={`/profile/${image.owner._id}`} style={{ textDecoration: 'none', color: 'white', fontSize: 20 }}> {image.owner.username}</Link>\r\n                                 <div className='overlayTextWorld'>\r\n                                    {isLiked(props.currentUser, image.likes, image._id)}\r\n                                    <div className='Worldcommentlength-container'>{image.comments.length} Comments</div>\r\n                                 </div>\r\n                                 <Link to={`/post/${image._id}`} style={{ textDecoration: 'none', color: 'white' }}><div className='fullPostText'> See the full Post</div></Link>\r\n                              </div>\r\n                           </div>\r\n                        </div>\r\n\r\n                     </div>\r\n                  </div>\r\n\r\n               })}\r\n\r\n            </div>\r\n         </div>\r\n      )\r\n   } else if (currentUser && arrayOfPosts.length === 0 && query) {\r\n      return (\r\n         <div>\r\n            <input type=\"text\" placeholder=\"Search\" onChange={e => { props.onChangeValue(e) }} name='queryInput' className=\"mr-sm-2\" />\r\n            <h1>Explore the World</h1>\r\n            <div>OH NO! THERE ARE NO POSTS!</div>\r\n         </div>\r\n      )\r\n   } else {\r\n      return (\r\n         <div>PLEASE LOG IN</div>\r\n      )\r\n   }\r\n}\r\n\r\n\r\nexport default WorldPost;\r\n","import axios from 'axios';\r\n\r\nconst service = axios.create({\r\n    baseURL: `http://localhost:5000/api`,\r\n    // withCredentials: true // => you might need this when having the users in the app \r\n  });\r\n\r\nconst errorHandler = err => {\r\n    // console.error(err);\r\n    throw err;\r\n  };\r\n  \r\n  export default {\r\n    service,\r\n  \r\n    handleUpload (theFile) {\r\n      // console.log('file in service: ', theFile)\r\n      return service.post('/upload', theFile)\r\n        .then(res => res.data)\r\n        .catch(errorHandler);\r\n    },\r\n  \r\n    saveNewThing (newThing) {\r\n      // console.log('new thing is: ', newThing)\r\n      return service.post('/things/create', newThing)\r\n        .then(res => res.data)\r\n        .catch(errorHandler);\r\n    }\r\n  }","import React from 'react';\r\nimport { Link } from 'react-router-dom'\r\nimport { Navbar, Nav, NavDropdown } from 'react-bootstrap'\r\n\r\n\r\nconst NavBar = (props) => {\r\n  const { currentUser } = props\r\n  function displayNotifications(notifications) {\r\n\r\n    if (notifications.length) {\r\n      notifications.sort((a, b) => {\r\n        if (a.createdAt < b.createdAt) {\r\n          return 1;\r\n        } else if (a.createdAt > b.createdAt) {\r\n          return -1\r\n        } else {\r\n          return 0\r\n        }\r\n      })\r\n\r\n      if (notifications.length) {\r\n        return (\r\n          <NavDropdown title=\"Notifications\" id=\"dropdown-menu-align-left\">\r\n            {notifications && notifications.map(eachNotification => {\r\n              if (eachNotification.type === \"Like\" || eachNotification.type === \"Comment\") {\r\n                return (\r\n\r\n\r\n                  <React.Fragment key={eachNotification._id}>\r\n                    <NavDropdown.Item href={`/post/${eachNotification.imageTo._id}`}>\r\n                      <span className='notification-userImage'><img src={eachNotification.fromWho.imageUrl} alt='notiPicture'></img></span>\r\n                      <span className='notificationText'><span className='notifiUser'>{eachNotification.fromWho.username}</span> <span className='notifiText'> {eachNotification.event}</span></span>\r\n                      <span className='postPictureNoti'><img src={eachNotification.imageTo.image} className='notiPostPicture' alt='notiPostPicture'></img></span>\r\n                    </NavDropdown.Item>\r\n                    <NavDropdown.Divider />\r\n\r\n\r\n\r\n                  </React.Fragment>\r\n\r\n\r\n                )\r\n              } else if (eachNotification.type === \"Follow\") {\r\n                return (\r\n                  <React.Fragment key={eachNotification._id}>\r\n                  <NavDropdown.Item as='button'  className='notiFollow'>\r\n                    <Link to={`/profile/${eachNotification.fromWho._id}`} style={{ textDecoration: 'none', color: 'black' }}>\r\n                      <span className='notification-userImage'><img src={eachNotification.fromWho.imageUrl} alt='notiPicture'></img></span>\r\n                      <span className='notificationText'><span className='notifiUser'>{eachNotification.fromWho.username}</span><span className='notifiText'> {eachNotification.event}</span></span>\r\n                    </Link>\r\n                    </NavDropdown.Item>\r\n                    <NavDropdown.Divider />\r\n                  </React.Fragment>\r\n                )\r\n              } else {\r\n                return;\r\n              }\r\n\r\n            })}\r\n          </NavDropdown>\r\n        )\r\n      }\r\n\r\n    } else {\r\n      return (<NavDropdown title=\"Notifications\" id=\"basic-nav-dropdown\"></NavDropdown>)\r\n    }\r\n  }\r\n\r\n  if (props) {\r\n    return (\r\n      <React.Fragment>\r\n        <Navbar bg=\"dark\" variant='dark' expand=\"lg\">\r\n          <Navbar.Brand href=\"/home\" className='nav-link navBarBrand'><img src='/triShareLogo2.png' className='TriShareLogo' alt='logoApp'></img></Navbar.Brand>\r\n          <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n          <Navbar.Collapse id=\"basic-navbar-nav\">\r\n            {props.currentUser ? <Nav className=\"mr-auto\">\r\n              <Nav.Link href=\"/world\" className='nav-link'>World</Nav.Link>\r\n              <Link to=\"/newPost\" className='nav-link'>New Experience</Link>\r\n\r\n\r\n              {displayNotifications(props.notifications.filter(notif => notif.toWho._id === currentUser._id))}\r\n\r\n\r\n              <Link to={`/profile/${props.currentUser._id}`} className='nav-link'><i className=\"fas fa-user\" style={{ marginRight: 3 }}></i>Profile</Link>\r\n              <NavDropdown title={<i class=\"fas fa-cog\"></i>} id=\"basic-nav-dropdown\" className='gearUserNav'>\r\n                <NavDropdown.Item onClick={props.onLogout} style={{ color: 'red' }}>Logout</NavDropdown.Item>\r\n              </NavDropdown>\r\n            </Nav> :\r\n              <Nav className=\"mr-auto\">\r\n                <Link to=\"/login\" className='nav-link'>Login</Link>\r\n                <Link to=\"/signup\" className='nav-link'>Signup</Link>\r\n              </Nav>\r\n            }\r\n          </Navbar.Collapse>\r\n        </Navbar>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default NavBar;","import React, { Component } from \"react\";\r\nimport { Switch, Route, Redirect } from 'react-router-dom'\r\nimport SinglePost from './Components/SinglePost';\r\nimport PostForm from './Components/PostForm';\r\nimport Signup from './Components/user-pages/Signup'\r\nimport Login from './Components/user-pages/Login'\r\nimport UserProfile from './Components/UserProfile';\r\nimport Home from './Components/Home';\r\nimport \"./index.css\";\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport axios from \"axios\";\r\nimport HomeFeed from './Components/HomeFeed';\r\nimport WorldPost from './Components/WorldPost';\r\n//CLOUDINARY\r\nimport service from './api/service';\r\nimport NavBar from './Components/Navbar';\r\nimport { Header } from \"./Components/Header\";\r\nimport { socket } from \"./Components/Header\";\r\n\r\nclass App extends Component {\r\n\r\n  state = {\r\n    users: [],\r\n    currentUser: null,\r\n    username: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    imageUrl: \"\",\r\n    bio: \"\",\r\n    imagePost: \"\",\r\n    caption: \"\",\r\n    tags: [],\r\n    imageFile: [],\r\n    comment: '',\r\n    notifications: [],\r\n    notifications_collection: [],\r\n    showConfirm: false,\r\n    url: \"http://localhost:5000/api/things\",\r\n    postImgUrl: \"http://localhost:5000/api/upload\",\r\n    appUrl: 'http://localhost:5000',\r\n    herokUrl: 'https://trishare.herokuapp.com',\r\n    lastUrl: '/world',\r\n    images: [],\r\n    profileImgDefault: 'https://res.cloudinary.com/thejacex/image/upload/v1572846104/emptyImage_qqqtqp.png',\r\n    selectedFile: null,\r\n    postMade: false,\r\n    message: \"\",\r\n    singlePost: null,\r\n    showEdit: false,\r\n    queryInput: '',\r\n    followContainer: false,\r\n    listFollowers: false,\r\n    listFollowing: false\r\n  };\r\n\r\n  componentDidMount() {\r\n    socket.emit('initial_data')\r\n    socket.on('get_data', this.get_data_torender)\r\n    socket.on('get_users', this.get_user_data)\r\n    socket.on('get_notifications', this.get_public_notifications)\r\n    socket.on('change_data', this.changingData)\r\n    // await this.get_data_torender()\r\n\r\n    axios.get(`${this.state.herokUrl}/auth/loggedin`, { withCredentials: true })\r\n      .then(responseFromBackend => {\r\n        const { userDoc } = responseFromBackend.data\r\n        // console.log(userDoc)\r\n        // if (userDoc !== undefined) {\r\n        //   setTimeout(() => { this.get_notifications(userDoc._id) }, 500)\r\n        // }\r\n        this.syncCurrentUser(userDoc);\r\n      })\r\n      .catch(err => console.log(\"Error while getting the user from the loggedin route \", err))\r\n  }\r\n\r\n  syncCurrentUser = (user) => {\r\n    this.setState({ currentUser: user })\r\n  }\r\n\r\n  file_upload_change = e => {\r\n    const formData = new FormData();\r\n    formData.append(\"imageUrl\", e.target.files[0]);\r\n    if (!formData === \"\") {\r\n      this.setState({\r\n        selectedFile: formData\r\n      });\r\n    }\r\n  };\r\n\r\n\r\n  postNewExp = async (e) => {\r\n    e.preventDefault();\r\n    //UPLOAD TO CLOUDINARY\r\n    if (this.state.imageFile !== []) {\r\n      const uploadData = new FormData();\r\n      await uploadData.append(\"imageUrl\", this.state.imageFile);\r\n\r\n      service.handleUpload(uploadData)\r\n        .then(response => {\r\n          console.log('response is: ', response);\r\n          // after the console.log we can see that response carries 'secure_url' which we can use to update the state \r\n          this.setState({ imagePost: response.imageUrl }, () => {\r\n\r\n            //CALL TO THE NEW POST ROUTE\r\n            axios.post(`${this.state.herokUrl}/createNewPost`, this.state, { withCredentials: true })\r\n              .then(theNewPost => {\r\n                console.log(\"NEW POST!\")\r\n                console.log(theNewPost.data)\r\n                const newPost = theNewPost.data\r\n                const clone = [...this.state.images]\r\n                clone.push(newPost);\r\n                this.setState({\r\n                  postMade: true,\r\n                  caption: \"\",\r\n                  images: clone,\r\n                  imagePost: '',\r\n                  tags: [],\r\n                  imageFile: []\r\n                })\r\n\r\n                setTimeout(\r\n                  this.setState({ postMade: false }), 1000)\r\n              })\r\n              .catch(err => console.log(err));\r\n\r\n\r\n          })\r\n\r\n        })\r\n        .catch(err => {\r\n          console.log(\"Error while uploading the file: \", err);\r\n          console.log(err)\r\n        });\r\n\r\n    }\r\n  }\r\n\r\n\r\n  get_user_data = (users) => {\r\n    console.log('this is users', users)\r\n    this.setState({\r\n      users: users\r\n    })\r\n  }\r\n\r\n  logoutUser = () => {\r\n    axios.delete(`${this.state.herokUrl}/auth/logout`, { withCredentials: true })\r\n      .then(theUser => {\r\n        console.log(\"DISCONNECTED!\")\r\n        console.log(theUser)\r\n        this.syncCurrentUser(null)\r\n        this.setState({ currentUser: null })\r\n      })\r\n    window.location = `/`\r\n  }\r\n  //END OF LOG OUT USER\t\r\n\r\n  //LIKE POST\t\r\n  handleLike = (e) => {\r\n    axios.post(`${this.state.herokUrl}/updateLikes/${e}`, this.state.currentUser, { withCredentials: true })\r\n      .then(responseFromBack => {\r\n        console.log(responseFromBack.data)\r\n        //  console.log(responseFromBack.data.thePost)\t\r\n        const newPost = responseFromBack.data\r\n        const clone = [...this.state.images]\r\n        const theIndex = clone.findIndex(postToFind => postToFind._id === newPost._id)\r\n        console.log(clone[theIndex]);\r\n        clone[theIndex].likes = newPost.likes\r\n        this.setState({ images: clone }, () => {\r\n          console.log(this.state.images)\r\n        })\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  get_public_notifications = (notification) => {\r\n    this.setState({\r\n      notifications_collection: notification\r\n    })\r\n  }\r\n\r\n\r\n  changingData = () => socket.emit('initial_data')\r\n\r\n\r\n  get_data_torender = (posts) => {\r\n\r\n    this.setState({\r\n      images: posts,\r\n    })\r\n  };\r\n\r\n\r\n  // get_notifications = async (userId) => {\r\n  //   try {\r\n\r\n  //     await axios.get(`${this.state.herokUrl}/getNotifications/${userId}`).then(response => {\r\n  //       const notificationList = response.data;\r\n  //       this.setState({\r\n  //         notifications: notificationList\r\n  //       })\r\n  //     }).catch(err => console.log(err))\r\n\r\n\r\n  //   } catch (err) {\r\n  //     console.log(err)\r\n  //   }\r\n  // }\r\n\r\n  //END OF GET ALL NOTIFICATIONS FROM DB\r\n\r\n\r\n  //uPDATE FORMS VALUES\r\n  updateForm = (e) => {\r\n    console.log(e)\r\n    this.setState({\r\n      [e.currentTarget.name]: e.currentTarget.value\r\n    })\r\n\r\n  }\r\n\r\n  //CHANGE IMAGE URL\r\n  changeImgUrl = (e) => {\r\n    this.setState({ imageUrl: e })\r\n  }\r\n\r\n  //CHANGE IMAGE FILES\r\n  changeFile = (e) => {\r\n    console.log(e)\r\n    if (e.size <= 10485760) {\r\n      this.setState({\r\n        imageFile: e,\r\n        message: \"\"\r\n      })\r\n    } else {\r\n      this.setState({ message: \"File size is too big!\" })\r\n    }\r\n  }\r\n  //END OF UPDATE FORM VALUES\r\n\r\n\r\n  //START OF SIGN UP\r\n  makeNewUser = (e) => {\r\n    e.preventDefault();\r\n    if (this.state.imageFile.length !== 0) {\r\n      //UPLOAD TO CLOUDINARY\r\n      const uploadData = new FormData();\r\n      uploadData.append(\"imageUrl\", this.state.imageFile);\r\n\r\n      service.handleUpload(uploadData)\r\n        .then(response => {\r\n          console.log('response is: ', response);\r\n          // after the console.log we can see that response carries 'secure_url' which we can use to update the state \r\n          this.setState({ imagePost: response.imageUrl }, () => {\r\n            //CALL TO THE SIGNUP ROUTE\r\n            axios.post(`${this.state.herokUrl}/auth/signup`, this.state, { withCredentials: true })\r\n              .then(theData => {\r\n                console.log(\"NEW USER!\")\r\n                console.log(theData)\r\n                this.setState({\r\n                  finished: true,\r\n                  username: \"\",\r\n                  email: \"\",\r\n                  password: \"\",\r\n                  imageUrl: \"\",\r\n                  imageFile: [],\r\n                })\r\n\r\n              })\r\n              .catch(err => console.log(err));\r\n\r\n\r\n          })\r\n\r\n        }).catch(err => {\r\n          console.log(\"Error while uploading the file: \", err);\r\n        })\r\n    } else {\r\n\r\n      //CALL TO THE SIGNUP ROUTE\r\n      axios.post(`${this.state.herokUrl}/auth/signup`, this.state, { withCredentials: true })\r\n        .then(theData => {\r\n          console.log(\"NEW USER!\")\r\n          console.log(theData)\r\n          this.setState({\r\n            finished: true,\r\n            username: \"\",\r\n            email: \"\",\r\n            password: \"\",\r\n            imageUrl: \"\",\r\n            imageFile: [],\r\n          })\r\n        })\r\n        .catch(err => console.log(err));\r\n\r\n    }\r\n  }\r\n  // END OF SIGN UP\r\n\r\n  //LOGIN USER\r\n  loginUser = (e) => {\r\n    e.preventDefault();\r\n    axios.post(`${this.state.herokUrl}/auth/login`, this.state, { withCredentials: true })\r\n      .then(responseFromServer => {\r\n        console.log(responseFromServer.data.userDoc)\r\n        const { userDoc } = responseFromServer.data;\r\n        this.syncCurrentUser(userDoc);\r\n        this.setState({\r\n          username: \"\",\r\n          password: \"\"\r\n        })\r\n\r\n        alert(\"You are logged in.\")\r\n        if (userDoc !== undefined) {\r\n          setTimeout(() => { this.get_notifications(userDoc._id) }, 500)\r\n        }\r\n\r\n        // return <Redirect to='/profile'/>\r\n      })\r\n      .catch(err => {\r\n        console.log(err)\r\n        // if(err.response.data) return this.setState({message: err.response.data.message})\r\n      })\r\n  }\r\n  // END OF LOGIN\r\n\r\n\r\n  updatePost = (e, thePost) => {\r\n    e.preventDefault();\r\n    let { caption, tags } = this.state\r\n\r\n    if (tags.length !== 0) {\r\n      tags = tags.split(/[.,\\/ -#]/)\r\n    }\r\n\r\n    const imageList = [...this.state.images];\r\n    const theIndex = imageList.indexOf(thePost)\r\n    let captionToUse = '';\r\n    let tagToUse = []\r\n    let tagsArray = []\r\n    let finalArray = []\r\n    tagToUse = tags\r\n    captionToUse = caption\r\n    if (captionToUse.length === 0) {\r\n      captionToUse = imageList[theIndex].caption\r\n    } if (tagToUse.length === 0) {\r\n      tagToUse = imageList[theIndex].tags\r\n    } else {\r\n      tagsArray = tagToUse\r\n      finalArray = tagsArray.filter(eachTag => { return eachTag !== \"\" })\r\n\r\n      imageList[theIndex].caption = captionToUse\r\n      imageList[theIndex].tags = finalArray\r\n      imageList[theIndex].modal = !imageList[theIndex].modal\r\n\r\n      this.setState({ images: imageList }, () =>\r\n        axios.put(`${this.state.herokUrl}/updatePost/${thePost._id}`, { caption: captionToUse, tags: tagToUse })\r\n          .then(theValues => {\r\n            this.setState({\r\n              caption: '',\r\n              tags: []\r\n            })\r\n            //() => {\r\n            //   window.location = `/post/${thePost._id}`\r\n            // }\r\n          }).catch(err => console.log(\"A problem happened getting the values!\"))\r\n      )\r\n    }\r\n  }\r\n\r\n  //DELETING POSTS\r\n  handleDelete = (thePostId) => {\r\n\r\n    const postArray = [...this.state.images]\r\n    const theIndex = postArray.findIndex(postToFind => postToFind._id === thePostId)\r\n    postArray.splice(theIndex, 1)\r\n    this.setState({\r\n      images: postArray,\r\n      showConfirm: false\r\n    })\r\n\r\n    axios.post(`${this.state.herokUrl}/delete/${thePostId}`)\r\n      .then(responseFromBackend => console.log(responseFromBackend))\r\n      .catch(err => console.log(err))\r\n\r\n    window.location = '/home'\r\n  }\r\n\r\n\r\n  confirmDelete = e => {\r\n    this.setState({\r\n      showConfirm: true\r\n    })\r\n  }\r\n\r\n  cancelDelete = e => {\r\n    this.setState({\r\n      showConfirm: false\r\n    })\r\n  }\r\n  // END OF DELETING POSTS\r\n\r\n  //EDIT POSTS\r\n  editPost = (e, theValue) => {\r\n    console.log(theValue)\r\n    // e.preventDefault();\r\n    const postList = [...this.state.images]\r\n    const theIndex = postList.findIndex(thePost => thePost._id === theValue)\r\n    let postToEdit = postList[theIndex]\r\n    postToEdit.modal = !postList[theIndex].modal\r\n    this.setState({\r\n      images: postList\r\n    })\r\n  }\r\n\r\n  updatePost = (e, thePost) => {\r\n    e.preventDefault();\r\n    const { caption, tags } = this.state\r\n    console.log(caption)\r\n    const imageList = [...this.state.images];\r\n    const theIndex = imageList.indexOf(thePost)\r\n    let captionToUse = '';\r\n    let tagToUse = []\r\n    let tagsArray = []\r\n    let finalArray = []\r\n    tagToUse = tags\r\n    captionToUse = caption\r\n    console.log(theIndex)\r\n    if (captionToUse.length === 0) {\r\n      captionToUse = imageList[theIndex].caption\r\n    } if (tagToUse.length === 0) {\r\n      tagToUse = imageList[theIndex].tags\r\n    } else {\r\n\r\n    }\r\n\r\n    if (typeof tagsArray === \"string\") {\r\n      tagsArray = tagToUse.split(/[.,\\/ -#]/)\r\n    }\r\n\r\n    finalArray = tagsArray.filter(eachTag => { return eachTag !== \"\" })\r\n\r\n    imageList[theIndex].caption = captionToUse\r\n    imageList[theIndex].tags = finalArray\r\n    console.log(tagToUse)\r\n    console.log(captionToUse)\r\n    console.log(imageList[theIndex])\r\n    imageList[theIndex].modal = !imageList[theIndex].modal\r\n\r\n    this.setState({ images: imageList }, () =>\r\n      axios.put(`${this.state.herokUrl}/updatePost/${thePost._id}`, { caption: captionToUse, tags: tagToUse })\r\n        .then(theValues => {\r\n          this.setState({\r\n            caption: '',\r\n            tags: []\r\n          })\r\n          //() => {\r\n          //   window.location = `/post/${thePost._id}`\r\n          // }\r\n        }).catch(err => console.log(\"A problem happened getting the values!\"))\r\n    )\r\n  }\r\n\r\n  //END OF EDIT POST\r\n\r\n  //EDIT USER BIO/PICTURE\r\n  showEditUser = () => {\r\n    this.setState({\r\n      showEdit: !this.state.showEdit\r\n    }, () => {\r\n      console.log(this.state.showEdit)\r\n    })\r\n  }\r\n\r\n  updateUser = (e, theUser) => {\r\n    e.preventDefault();\r\n    const { bio, imageFile, currentUser } = this.state\r\n    console.log(this.state.bio)\r\n    console.log(this.state.imageFile)\r\n    if (this.state.imageFile.length !== 0) {\r\n\r\n      //UPLOAD TO CLOUDINARY\r\n      const uploadData = new FormData();\r\n      uploadData.append(\"imageUrl\", this.state.imageFile);\r\n\r\n      service.handleUpload(uploadData)\r\n        .then(response => {\r\n          console.log('response is: ', response);\r\n          // after the console.log we can see that response carries 'secure_url' which we can use to update the state \r\n          this.setState({ imagePost: response.imageUrl }, () => {\r\n            //CALL TO THE SIGNUP ROUTE\r\n            axios.put(`${this.state.herokUrl}/auth/updateUser/${currentUser._id}`, { bio, imageFile: this.state.imagePost, currentUser }, { withCredentials: true })\r\n              .then(theData => {\r\n                console.log(\"PROFILE UPDATED!\")\r\n                console.log(theData.data)\r\n                const listUsers = [...this.state.users]\r\n                const { bio, imageUrl } = theData.data\r\n                const theIndex = listUsers.findIndex(theUser => theUser._id === currentUser._id)\r\n                listUsers[theIndex].bio = bio\r\n                listUsers[theIndex].imageUrl = imageUrl\r\n\r\n                this.setState({\r\n                  users: listUsers,\r\n                  imageUrl: \"\",\r\n                  imageFile: [],\r\n                  showEdit: !this.state.showEdit\r\n                })\r\n\r\n                window.location = `/profile/${currentUser._id}`\r\n              })\r\n              .catch(err => console.log(err));\r\n\r\n\r\n          })\r\n\r\n        }).catch(err => {\r\n          console.log(\"Error while uploading the file: \", err);\r\n        })\r\n    } else {\r\n      axios.put(`${this.state.herokUrl}/auth/updateUser/${currentUser._id}`, { bio, imageFile, currentUser }, { withCredentials: true })\r\n        .then(theData => {\r\n          console.log(\"PROFILE UPDATED!\")\r\n          console.log(theData.data)\r\n          const listUsers = [...this.state.users]\r\n          const { bio } = theData.data\r\n          const theIndex = listUsers.findIndex(theUser => theUser._id === currentUser._id)\r\n          listUsers[theIndex].bio = bio\r\n\r\n          this.setState({\r\n            users: listUsers,\r\n            imageUrl: \"\",\r\n            imageFile: [],\r\n            showEdit: !this.state.showEdit\r\n          })\r\n          window.location.reload();\r\n        })\r\n        .catch(err => console.log(err));\r\n\r\n    }\r\n\r\n  }\r\n\r\n  //END OF EDIT USER BIO/PICTURE\r\n\r\n\r\n  //FOLLOWING FUNCTIONALITY\r\n  handleFollow = userToFollow => {\r\n    console.log(userToFollow)\r\n    const { currentUser } = this.state\r\n\r\n    axios.post(`${this.state.herokUrl}/follow/${userToFollow}`, currentUser)\r\n      .then(responseFromBackend => {\r\n        console.log(responseFromBackend.data)\r\n        console.log(currentUser._id)\r\n        const userList = [...this.state.users]\r\n        const myUser = this.state.currentUser\r\n        const users = responseFromBackend.data\r\n        const user1 = users[users.findIndex(theUser => theUser._id === currentUser._id)]\r\n        const user2 = users[users.findIndex(theUser => theUser._id === userToFollow)]\r\n        console.log(user1)\r\n        console.log(user2)\r\n        const theIndex1 = userList.findIndex(userToFind => userToFind._id === user1._id)\r\n        console.log(theIndex1)\r\n        const theIndex2 = userList.findIndex(userToFind => userToFind._id === user2._id)\r\n        console.log(theIndex2)\r\n        myUser.followers = user1.followers\r\n        myUser.following = user1.following\r\n        userList[theIndex1].followers = user1.followers\r\n        userList[theIndex1].following = user1.following\r\n        userList[theIndex2].followers = user2.followers\r\n        userList[theIndex2].following = user2.following\r\n        console.log(\"NEW USER LIST\")\r\n        console.log(userList)\r\n        this.setState({\r\n          users: userList,\r\n          currentUser: myUser\r\n        })\r\n      })\r\n\r\n  }\r\n  //END OF FOLLOWING FUNCTIONALITY\r\n\r\n  // ADD COMMENTS\r\n  handleComment = (e, postId) => {\r\n    e.preventDefault();\r\n    const newComment = {\r\n      owner: this.state.currentUser,\r\n      message: this.state.comment\r\n    }\r\n    const clone = [...this.state.images]\r\n    console.log(clone.findIndex(thePost => thePost._id === postId))\r\n    const theIndex = clone.findIndex(thePost => thePost._id === postId)\r\n    if (theIndex >= 0) {\r\n      clone[theIndex].comments.push({\r\n        user: {\r\n          _id: this.state.currentUser._id,\r\n          username: this.state.currentUser.username,\r\n          imageUrl: this.state.currentUser.imageUrl\r\n        }, comment: this.state.comment\r\n      })\r\n    }\r\n\r\n    this.setState({\r\n      images: clone,\r\n      comment: ''\r\n    })\r\n\r\n    axios.put(`${this.state.herokUrl}/addComment/${postId}`, newComment)\r\n      .then(responseFromBackend => console.log(responseFromBackend))\r\n\r\n      .catch(err => console.log(err))\r\n\r\n  }\r\n\r\n  //END OF ADD COMMENTS\r\n\r\n  //DISPLAY FOLLOWING FOLLOWERS LIST CONTAINER\r\n  showFollow = (e) => {\r\n    e.preventDefault();\r\n    console.log(e.currentTarget.innerHTML)\r\n    let theChoice = e.currentTarget.innerHTML\r\n    if (theChoice === 'Followers:') {\r\n      this.setState({\r\n        followContainer: !this.state.followContainer,\r\n        listFollowers: true,\r\n        listFollowing: false\r\n      })\r\n    } else {\r\n      this.setState({\r\n        followContainer: !this.state.followContainer,\r\n        listFollowers: false,\r\n        listFollowing: true\r\n      })\r\n    }\r\n\r\n\r\n  }\r\n  //DISPLAY FOLLOWER/FOLLOWING LIST\r\n  showFollowers = (e, theValue) => {\r\n    e.preventDefault()\r\n    let theChoice = e.target.innerHTML\r\n    console.log(theValue)\r\n    if (theChoice === 'Followers') {\r\n      this.setState({\r\n        listFollowers: true,\r\n        listFollowing: false\r\n      })\r\n    } else {\r\n      console.log(\"FOLLOWING!\")\r\n      this.setState({\r\n        listFollowers: false,\r\n        listFollowing: true\r\n      })\r\n    }\r\n  }\r\n\r\n\r\n  //CHANGE QUERY WITH TAGS\r\n  updateQueryBar = (theTag) => {\r\n    console.log(theTag)\r\n    this.setState({\r\n      queryInput: theTag\r\n    })\r\n  }\r\n\r\n  logoutUser = () => {\r\n    axios.delete(`${this.state.herokUrl}/auth/logout`, { withCredentials: true })\r\n      .then(theUser => {\r\n        console.log(\"DISCONNECTED!\")\r\n        console.log(theUser)\r\n        this.syncCurrentUser(null)\r\n        this.setState({ currentUser: null }, () => {\r\n          window.location = `http://localhost:3000`\r\n        })\r\n      })\r\n  }\r\n\r\n  render() {\r\n\r\n    return (\r\n      <div className=\"App\">\r\n        <Header />\r\n\r\n        <NavBar\r\n          notifications={this.state.notifications_collection}\r\n          currentUser={this.state.currentUser}\r\n          logoutUser={this.logoutUser}\r\n          lastUrl={this.state.lastUrl}\r\n          onLogout={this.logoutUser}\r\n          actualUrl={window.location}\r\n        />\r\n        <Switch>\r\n          <Route exact path=\"/\" render={(props) => !this.state.currentUser ? <Home /> : (<Redirect to=\"/home\" />)} />\r\n          <Route path=\"/world\" render={(props) => <WorldPost {...props} allPosts={this.state.images} renderPosts={this.worldRender} handleLike={this.handleLike} currentUser={this.state.currentUser} query={this.state.queryInput} onChangeValue={this.updateForm} />} />\r\n          <Route exact path=\"/theImg\" render={(props) => <SinglePost {...props} myUrl={this.state.images} />} />\r\n          <Route exact path=\"/home\" render={(props) => (<HomeFeed {...props} allPosts={this.state.images} currentUser={this.state.currentUser} handleLike={this.handleLike} />)} />\r\n          <Route exact path=\"/newPost\" render={(props) => <PostForm {...props} handleSubmit={this.postNewExp} changeFile={this.changeFile} changeUrl={this.changeImgUrl} onChangeValue={this.updateForm} formValues={this.state} />} />\r\n          <Route exact path=\"/signup\" render={(props) => <Signup {...props} onChangeValue={this.updateForm} changeFile={this.changeFile} handleSubmit={this.makeNewUser} currentUser={this.state.currentUser} onUserChange={userDoc => this.syncCurrentUser(userDoc)} formValues={this.state} />}></Route>\r\n          <Route exact path=\"/login\" render={(props) => <Login {...props} onChangeValue={this.updateForm} handleSubmit={this.loginUser} currentUser={this.state.currentUser} formValues={this.state} />}></Route>\r\n          <Route exact path=\"/post/:id\" render={(props) => <SinglePost {...props} postValues={this.state.images} onDelete={this.handleDelete} cancelDelete={this.cancelDelete} confirmDelete={this.confirmDelete} showConfirm={this.state.showConfirm} handleLike={this.handleLike} handleEdit={this.editPost} updatePost={this.updatePost} currentUser={this.state.currentUser} onChangeValue={this.updateForm} comment={this.state.comment} handleComment={this.handleComment} updateQuery={this.updateQueryBar} />}></Route>\r\n\r\n          <Route exact path=\"/profile/:id\" render={(props) =>\r\n            this.state.currentUser ?\r\n              (<UserProfile {...props}\r\n                images={this.state.images}\r\n                currentUser={this.state.currentUser}\r\n                users={this.state.users}\r\n                showEdit={this.state.showEdit}\r\n                handleFollow={this.handleFollow}\r\n                onChangeValue={this.updateForm}\r\n                handleEditProfile={this.showEditUser}\r\n                changeFile={this.changeFile}\r\n                updateUser={this.updateUser}\r\n                handleShowFollow={this.showFollow}\r\n                followContainer={this.state.followContainer}\r\n                showFollowers={this.showFollowers}\r\n                listFollowing={this.state.listFollowing}\r\n                listFollowers={this.state.listFollowers}\r\n              />) :\r\n              (<Redirect to=\"/login\" />)} />\r\n\r\n        </Switch>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// BOTH VERSIONS MERGED!\r\n\r\nexport default App;\r\n\r\n\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n    <BrowserRouter>\n    <App />\n    </BrowserRouter>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}