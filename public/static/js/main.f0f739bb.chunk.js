(this.webpackJsonpthreefinal=this.webpackJsonpthreefinal||[]).push([[0],{127:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(24),o=n.n(l),i=(n(55),n(70)),c=n(16),s=n.n(c),u=n(26),m=n(31),d=n(12),h=n(20),g=n(14),p=n(13),f=n(15),E=n(30),v=(n(86),n(21)),w=n(71),b=n.n(w),U=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(g.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).getData=Object(m.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.url,e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)}))),n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(s.a.mark((function e(){var t=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getData().then((function(){t.initThree()}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initThree",value:function(){var e,t,n,a=this.props.url;console.log("MY URL"),console.log(a);var r=document.getElementById("WebGL-output"),l=r.clientWidth,o=r.clientHeight;!function(){t=new v.Scene,(e=new v.PerspectiveCamera(75,l/o,1,1e3)).position.z=1,e.target=new v.Vector3(0,0,0);var i=new b.a(e,r);i.autoRotate=!1,i.enableZoom=!1;var c=new v.AmbientLight(6842472);t.add(c);var s=new v.DirectionalLight(16777215);s.position.set(550,100,550),s.intensity=.6,t.add(s),(new v.TextureLoader).load(a,(function(e){var n=new v.SphereGeometry(500,60,2*Math.pi);n.scale(-1,1,1);var a=new v.MeshBasicMaterial({map:e}),r=new v.Mesh(n,a);t.add(r)})),(n=new v.WebGLRenderer).setClearColor(16777215),n.setPixelRatio(window.devicePixelRatio),n.setSize(l,o),r.appendChild(n.domElement)}(),function a(){requestAnimationFrame(a);n.render(t,e)}()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{style:{height:this.props.height,width:this.props.width},id:"WebGL-output"}))}}]),t}(a.Component),C=function(e){return r.a.createElement("button",{className:"likeBtn",onClick:function(){return e.onLike(e.postId)}},r.a.createElement("i",{className:e.theIcon}))},y=function(e){return console.log("LIST COMMENT"),console.log(e.allPostComments),r.a.createElement("div",null,"COMMENT SECTION",r.a.createElement("div",{className:"listOfComments"}),r.a.createElement("input",{type:"text",placeholder:"Write a comment....",name:"comment",className:"commentInput",value:e.comment,onChange:function(t){e.updateComment(t)}}),r.a.createElement("button",{onClick:function(t){e.handleComment(t,e.postId)}},"SEND"))},x=n(6),k=function(){var e=document.getElementsByTagName("canvas")[0];console.log(e),"100vh"===e.style.height?e.style.height="50vh":e.style.height="100vh"};window.addEventListener("fullscreenchange",k),window.addEventListener("webkitfullscreenchange",k),window.addEventListener("mozfullscreenchange",k),window.addEventListener("MSFullscreenChange",k);var O=function(e){console.log("PROPS!"),console.log(e);var t,n=e.match.params.id,a=e.postValues.filter((function(e){return e._id===n}))[0];return a?r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){(0,e.history.goBack)()}},"Go back"),r.a.createElement("div",{className:"singlePost"},r.a.createElement("div",{className:"singlePostHeader"},r.a.createElement("img",{src:a.owner.imageUrl,width:"50px",height:"50px",alt:"miniProfilePic"}),r.a.createElement(x.b,{to:"/profile/".concat(a.owner._id)},a.owner.username)),r.a.createElement(U,{url:a.image,height:"50vh",width:"100vw"}),r.a.createElement("div",null),r.a.createElement("button",{onClick:function(e){e.preventDefault();var t,n=document.getElementById("WebGL-output");(t=n).requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen?t.msRequestFullscreen():console.log("Fullscreen API is not supported.")}},"GO FULLSCREEN"),r.a.createElement("div",{className:"singleFooter"},r.a.createElement("div",{className:"singleLikes"},a.likes.length," Likes",function(t,n,a){if(t){var l=t._id;return n.findIndex((function(e){return e._id===l}))>=0?r.a.createElement(C,{onLike:e.handleLike,postId:a,theIcon:"fas fa-heart likeIcon"}):r.a.createElement(C,{onLike:e.handleLike,postId:a,theIcon:"far fa-heart likeIcon"})}}(e.currentUser,a.likes,a._id)),a.caption,r.a.createElement("div",{className:"tagName"},a.tags.map((function(e){return r.a.createElement(x.b,null,"#",e," ")})))),r.a.createElement("p",null,(t=a.createdAt,new Date(t).toDateString())),e.currentUser&&r.a.createElement(y,{comment:e.comment,allPostComments:a.comments,updateComment:e.onChangeValue,handleComment:e.handleComment,postId:a._id}))):r.a.createElement("div",null,"OH NO!")},S=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,l=new Array(a),o=0;o<a;o++)l[o]=arguments[o];return(n=Object(g.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={imageUrl:"",imageFile:[],redirect:!1},n.canvasStyle={height:"200px",width:"600px"},n.height="350px",n.width="62vw",n.style={display:"block","margin-top":"100px","margin-left":"auto","margin-right":"auto","max-width":"600px",height:"300px",alignText:"center",border:"1px solid black"},n.textAreaStyle={height:"100px",width:"40vw",margin:"20px auto",resize:"none",fontSize:"20px",display:"block"},n.textTagsArea={height:"50px",width:"40vw","margin-right":"50px"},n.canvasContainer={display:"block",border:"1px solid green",margin:"20px 18vw",height:"350px",width:"62vw"},n.createButton={display:"block",margin:"auto"},n.formStyle={justifyContent:"center",alignText:"center"},n.tagsContainer={display:"flex","justify-content":"flex-start","align-items":"center",border:"1px solid black"},n.uploadPost=function(e){e.preventDefault(),console.log(e.target)},n.seePreview=function(e){if(e.preventDefault(),console.log(e.target.files),e.target.files[0]&&e.target.files[0].size<=10485760){var t=URL.createObjectURL(e.target.files[0]);n.props.changeFile(e.target.files[0]),n.props.changeUrl(t),n.setState({imageUrl:t,imageFile:e.target.files[0]}),n.changePreview(t);var a=document.getElementById("myFileList");a.setAttribute("disabled",!0),a.className="inputDisabled"}else n.props.changeFile(e.target.files[0])},n.changePreview=function(e){return r.a.createElement("div",{style:n.canvasStyle},n.state.imageUrl&&r.a.createElement(U,{url:e,height:n.height,width:n.width}))},n.removePicture=function(e){e.preventDefault();var t=document.getElementById("myFileList");t.removeAttribute("disabled"),t.value=null,t.className="inputfile",n.setState({imageUrl:"",imageFile:[]})},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.setState({redirect:!0})}),2e3)}},{key:"render",value:function(){var e=this,t=this.props.formValues,n=t.caption,a=t.tags,l=t.currentUser,o=t.postMade;return l&&!o?r.a.createElement("div",{className:"formPost"},r.a.createElement("h1",null,"New Post"),this.props.formValues.message,r.a.createElement("form",{style:this.formStyle,onSubmit:this.props.handleSubmit},r.a.createElement("input",{type:"file",onChange:this.seePreview,id:"myFileList",className:"inputfile"}),r.a.createElement("label",{for:"myFileList"},"Choose a file"),r.a.createElement("label",null,"(File size max 10 Mb)"),r.a.createElement("button",{onClick:this.removePicture,className:"removeBtn"},"REMOVE"),r.a.createElement("div",{style:this.canvasContainer,id:"myCanvasContainer"},this.changePreview(this.state.imageUrl)),r.a.createElement("textarea",{style:this.textAreaStyle,type:"text",value:n,onChange:function(t){return e.props.onChangeValue(t)},name:"caption",placeholder:"write a caption..."}),r.a.createElement("div",{style:this.tagsContainer},r.a.createElement("span",{className:"tagTitleAndTextarea"},r.a.createElement("span",{className:"tagsTitle"},"Tags: "),r.a.createElement("textarea",{style:this.textTagsArea,type:"text",value:a,onChange:function(t){return e.props.onChangeValue(t)},name:"tags",placeholder:"e.g: #Beach #Sun #Ocean"}))),r.a.createElement("button",{style:this.createButton},"CREATE NEW EXPERIENCE")),r.a.createElement("div",null)):l&&o?r.a.createElement(E.a,{to:"/world"}):this.state.redirect?r.a.createElement(E.a,{to:"/login"}):r.a.createElement("div",null,"LOADING...")}}]),t}(r.a.Component),N="",I=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(g.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).finished=!1,n.seePreview=function(e){if(e.preventDefault(),console.log(e.target.files[0]),e.target.files[0].size<=10485760){var t=URL.createObjectURL(e.target.files[0]);N=t,n.props.changeFile(e.target.files[0])}},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;console.log(this.props);var t=this.props.formValues,n=t.username,a=t.email,l=t.password;return this.finished||this.props.currentUser?r.a.createElement(E.a,{to:"/profile/".concat(this.props.currentUser._id)}):r.a.createElement("div",{className:"SignupForm"},r.a.createElement("section",null,r.a.createElement("h2",null,"Sign Up"),r.a.createElement("form",{onSubmit:this.props.handleSubmit},r.a.createElement("label",null,"Username: "),r.a.createElement("input",{type:"text",name:"username",value:n,onChange:function(t){return e.props.onChangeValue(t)}}),r.a.createElement("label",null,"Email: "),r.a.createElement("input",{type:"email",name:"email",value:a,onChange:function(t){return e.props.onChangeValue(t)}}),r.a.createElement("label",null,"Password "),r.a.createElement("input",{type:"password",name:"password",value:l,onChange:function(t){return e.props.onChangeValue(t)}}),r.a.createElement("label",null,"Image "),r.a.createElement("input",{type:"file",onChange:this.seePreview,name:"imageFile"}),r.a.createElement("img",{src:N,alt:"Choose a file"}),r.a.createElement("button",null,"Submit"))))}}]),t}(r.a.Component),F=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(g.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).message=null,n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props.formValues,n=t.username,a=t.password;return t.currentUser?r.a.createElement(E.a,{to:"/home"}):r.a.createElement("div",null,r.a.createElement("section",null,r.a.createElement("h2",null," Login "),r.a.createElement("form",{onSubmit:this.props.handleSubmit},r.a.createElement("label",null," Username: "),r.a.createElement("input",{value:n,onChange:function(t){return e.props.onChangeValue(t)},type:"text",name:"username",placeholder:"username"}),r.a.createElement("label",null," Password"),r.a.createElement("input",{value:a,onChange:function(t){return e.props.onChangeValue(t)},type:"password",name:"password",placeholder:"***********"}),r.a.createElement("button",null," Login ")),this.message&&r.a.createElement("div",null," ",this.message," ")))}}]),t}(r.a.Component),P=function(e){var t=e.currentUser;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:function(n){return e.submitUpdate(n,t)}},r.a.createElement("input",{type:"file",onChange:function(t){return function(t){t.target.files[0].size<=10485760&&e.changeFile(t.target.files[0])}(t)}}),r.a.createElement("textarea",{type:"text",name:"bio",placeholder:t.bio,onChange:function(t){return e.handleUpdate(t)}}),r.a.createElement("button",null,"Update profile")))},L=function(e){var t=e.image;return r.a.createElement("div",null,r.a.createElement("h5",null,"Welcome to the edit Form"),r.a.createElement("form",{onSubmit:function(n){return e.submitUpdate(n,t)}},r.a.createElement("label",{htmlFor:"tags"}," Tags "),r.a.createElement("input",{type:"text",name:"tags",placeholder:t.tags,value:e.tags,onChange:function(t){return e.handleUpdate(t)}}),r.a.createElement("textarea",{type:"text",name:"caption",placeholder:t.caption,value:e.caption,onChange:function(t){return e.handleUpdate(t)}}),r.a.createElement("button",{className:"btn btn-sm btn-success"},"Save")))},_=n(79),j=function(e){var t=e.images,n=e.currentUser,a=e.users,l=e.showEdit,o=n._id,i=e.match.params.id;var c,s=t.filter((function(e){return e.owner._id===i})),u=a.filter((function(e){return e._id===i}))[0];return n&&u?r.a.createElement("div",null,o!==i?r.a.createElement("button",{onClick:function(){(0,e.history.goBack)()}},"Go back"):"",r.a.createElement("div",{className:"user-profile"},n&&r.a.createElement("img",{src:u.imageUrl,style:{borderRadius:70,width:"150px",height:"150px"},alt:"profile-img"}),r.a.createElement("p",null,u.username),r.a.createElement("p",null,u.bio),r.a.createElement(x.b,{to:"/followers/".concat(i)},r.a.createElement("span",{className:"followUser"},"Followers: ",u.followers.length)),r.a.createElement(x.b,{to:"/following/".concat(i)}," ",r.a.createElement("span",{className:"followUser"},"Following: ",u.following.length)),(c=u.followers,o===i?r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{onClick:e.onLogout,className:"btn btn-sm btn-danger"},"Logout"),r.a.createElement("button",{onClick:e.handleEditProfile},"Edit Profile")):c.indexOf(o)>=0?r.a.createElement("button",{className:"btn btn-sm  btn-primary",onClick:function(t){return e.handleFollow(i)}},r.a.createElement("i",{className:"fa fa-user-minus"}," Unfollow ")):r.a.createElement("button",{className:"btn btn-sm  btn-primary",onClick:function(t){return e.handleFollow(i)}},r.a.createElement("i",{className:"fa fa-user-plus"}," Follow "))),l&&r.a.createElement(P,{handleUpdate:e.onChangeValue,currentUser:n,submitUpdate:e.updateUser,changeFile:e.changeFile})),r.a.createElement("div",{className:"worldContainer"},s&&s.map((function(t){return r.a.createElement("div",{className:"col col-s-12 worldPost",key:t._id},r.a.createElement("div",{className:"worldImgContainer"},r.a.createElement("img",{className:"worldImg",src:t.image,alt:"worldPic",width:"100%",height:"300px"}),r.a.createElement(x.b,{to:"/post/".concat(t._id)}," ",r.a.createElement("div",{className:"overlayContainer"},r.a.createElement("div",{className:"textOverlay",id:t._id},"See the full Post")))),function(t){if(o===i)return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:"btn btn-sm btn-danger",onClick:function(t){return e.confirmDelete()}},"Delete"),r.a.createElement("button",{onClick:function(n){e.handleEdit(n,t)}},"Edit"))}(t._id),t.modal&&r.a.createElement(L,{image:t,handleUpdate:e.onChangeValue,submitUpdate:e.updatePost}),!0===e.showConfirm&&r.a.createElement(_.a,{warning:!0,showCancel:!0,confirmBtnText:"Confirm!",confirmBtnBsStyle:"danger",cancelBtnBsStyle:"default",confirmBtnCssClass:"confirmDelete",title:"Are you sure?",onConfirm:function(n){return e.onDelete(t._id)},onCancel:function(t){return e.cancelDelete()}},"Do you want to delete this post?"))}))),!s.length&&r.a.createElement("p",null,"You dont have any posts ")):r.a.createElement("div",null,"LOADING...")},D=function(e){function t(){return Object(d.a)(this,t),Object(g.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"HomePage"},r.a.createElement("div",{className:"HomeItem"}),r.a.createElement("div",{className:"HomeItem"}),r.a.createElement("div",{className:"HomeItem"}))}}]),t}(r.a.Component),T=function(e){var t=e.allUsers,n=e.match.params.id,a=t.filter((function(e){return e.following.indexOf(n)>=0}));return console.log(e),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){(0,e.history.goBack)()}},"Go back"),r.a.createElement("div",null,"FOLLOWERS"),a.map((function(e){return r.a.createElement("div",{key:e.username},r.a.createElement("div",null,r.a.createElement("img",{src:e.imageUrl,style:{borderRadius:70,width:"80px",height:"80px"},alt:"profile-img"})),r.a.createElement(x.b,{to:"/profile/".concat(e._id)},e.username))})))},R=function(e){var t=e.allUsers,n=e.match.params.id,a=t.filter((function(e){return e.followers.indexOf(n)>=0}));return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){(0,e.history.goBack)()}},"Go back"),r.a.createElement("div",null,"FOLLOWING LIST"),a.map((function(e){return r.a.createElement("div",{key:e.username},r.a.createElement("div",null,r.a.createElement("img",{src:e.imageUrl,style:{borderRadius:70,width:"80px",height:"80px"},alt:"profile-img"})),r.a.createElement(x.b,{to:"/profile/".concat(e._id)},e.username))})))},A=(n(91),n(10)),V=n.n(A),B=function(e){var t=[],n=[],a=e.currentUser,l=e.allPosts;a&&(n=a.following,l.length&&(t=l.filter((function(e){return n.indexOf(e.owner._id)>=0||e.owner._id===a._id}))));var o=t.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)}));return null!==a?r.a.createElement("div",null,r.a.createElement("div",null,t.length>0?o.map((function(t){return r.a.createElement("div",{className:" col-s-12 feedPost",key:t._id},r.a.createElement("div",null,r.a.createElement("img",{src:t.owner.imageUrl,width:"50px",height:"50px",alt:"miniProfilePic"}),r.a.createElement(x.b,{to:"/profile/".concat(t.owner._id)}," ",t.owner.username)),r.a.createElement("div",{className:"worldImgContainer"},r.a.createElement("img",{className:"worldImg",src:t.image,alt:"worldPic",width:"100%",height:"300px"}),r.a.createElement(x.b,{to:"/post/".concat(t._id)}," ",r.a.createElement("div",{className:"overlayContainer"},r.a.createElement("div",{className:"textOverlay",id:t._id},"See the full Post")))),r.a.createElement("p",null,t.likes.length," Likes"),function(t,n,a){if(t){var l=t._id;return n.findIndex((function(e){return e._id===l}))>=0?r.a.createElement(C,{onLike:e.handleLike,postId:a,theIcon:"fas fa-heart likeIcon"}):r.a.createElement(C,{onLike:e.handleLike,postId:a,theIcon:"far fa-heart likeIcon"})}}(e.currentUser,t.likes,t._id),r.a.createElement("p",null,t.caption),r.a.createElement("p",null,(n=t.createdAt,new Date(n).toDateString())));var n})):r.a.createElement("div",null,"START FOLLOWING PEOPLE ",r.a.createElement(x.b,{to:"/world"},"(SEE WORLD) "),"OR UPLOAD YOUR OWN EXPERIENCES!"))):r.a.createElement("div",null,"LOADING...")},q=function(e){console.log(e);var t=[];var n=e.query;if(""!==n){var a=n.toLowerCase();t=e.allPosts.filter((function(e){return e.tags.join("").toLowerCase().includes(a)}))}else e.allPosts.length>0&&(t=e.allPosts);return t.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("h1",null,"World"),r.a.createElement("div",{className:"worldContainer"},t&&t.map((function(t){return r.a.createElement("div",{className:"worldPost",key:t._id},r.a.createElement("div",null,r.a.createElement("img",{src:t.owner.imageUrl,width:"50px",height:"50px",alt:"miniProfilePic"}),r.a.createElement(x.b,{to:"/profile/".concat(t.owner._id)}," ",t.owner.username)),r.a.createElement("div",{className:"worldImgContainer"},r.a.createElement("img",{className:"worldImg",src:t.image,alt:"worldPic",width:"100%",height:"300px"}),r.a.createElement(x.b,{to:"/post/".concat(t._id)}," ",r.a.createElement("div",{className:"overlayContainer"},r.a.createElement("div",{className:"textOverlay",id:t._id},"See the full Post")))),r.a.createElement("p",null,t.likes.length," Likes"),function(t,n,a){if(console.log("LIST OF LIKES"),console.log(n),t){var l=t._id;return n.findIndex((function(e){return e._id===l}))>=0?r.a.createElement(C,{onLike:e.handleLike,postId:a,theIcon:"fas fa-heart likeIcon"}):r.a.createElement(C,{onLike:e.handleLike,postId:a,theIcon:"far fa-heart likeIcon"})}}(e.currentUser,t.likes,t._id))}))))):r.a.createElement("div",null,"NO POSTS!")},W=n(131),M=n(133),G=n(134),z=n(132),H=n(78),Y=function(e){if(e)return r.a.createElement(r.a.Fragment,null,r.a.createElement(W.a,{bg:"dark",variant:"dark",expand:"lg"},r.a.createElement(W.a.Brand,{href:"/home"},"React-Bootstrap"),r.a.createElement(W.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(W.a.Collapse,{id:"basic-navbar-nav"},e.currentUser?r.a.createElement(M.a,{className:"mr-auto"},r.a.createElement(M.a.Link,{href:"/world"},"World"),r.a.createElement(M.a.Link,{href:"/newPost"},"New Experience"),r.a.createElement(G.a,{title:"Notifications",id:"basic-nav-dropdown"},r.a.createElement(G.a.Item,{href:"#action/3.1"},"Action"),r.a.createElement(G.a.Item,{href:"#action/3.2"},"Another action"),r.a.createElement(G.a.Item,{href:"#action/3.3"},"Something"),r.a.createElement(G.a.Divider,null),r.a.createElement(G.a.Item,{href:"#action/3.4"},"Separated link")),r.a.createElement(z.a,{inline:!0},r.a.createElement(H.a,{type:"text",placeholder:"Search",value:e.queryInput,onChange:function(t){e.onChangeValue(t)},name:"queryInput",className:"mr-sm-2"})),r.a.createElement(x.b,{to:"/profile/".concat(e.currentUser._id)},"Profile")):r.a.createElement(M.a,{className:"mr-auto"},r.a.createElement(M.a.Link,{href:"/login"},"Login"),r.a.createElement(M.a.Link,{href:"/signup"},"Signup")))))},J=V.a.create({baseURL:"http://localhost:5000/api"}),X=function(e){throw e},K={service:J,handleUpload:function(e){return J.post("/upload",e).then((function(e){return e.data})).catch(X)},saveNewThing:function(e){return J.post("/things/create",e).then((function(e){return e.data})).catch(X)}},Z=function(e){function t(){var e,n;Object(d.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(g.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={users:[],currentUser:null,username:"",email:"",password:"",imageUrl:"",bio:"",imagePost:"",caption:"",tags:[],imageFile:[],comment:"",showConfirm:!1,url:"http://localhost:5000/api/things",postImgUrl:"http://localhost:5000/api/upload",newPostUrl:"http://localhost:5000",lastUrl:"/world",images:[],profileImgDefault:"https://res.cloudinary.com/thejacex/image/upload/v1572846104/emptyImage_qqqtqp.png",selectedFile:null,postMade:!1,message:"",singlePost:null,showEdit:!1,queryInput:""},n.file_upload_change=function(e){var t=new FormData;t.append("imageUrl",e.target.files[0]),""===!t&&n.setState({selectedFile:t})},n.postNewExp=function(){var e=Object(m.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n.state.imageFile===[]){e.next=6;break}return a=new FormData,e.next=5,a.append("imageUrl",n.state.imageFile);case 5:K.handleUpload(a).then((function(e){console.log("response is: ",e),n.setState({imagePost:e.imageUrl},(function(){V.a.post("http://localhost:5000/createNewPost",n.state,{withCredentials:!0}).then((function(e){console.log("NEW POST!"),console.log(e.data);var t=e.data,a=Object(u.a)(n.state.images);a.push(t),n.setState({postMade:!0,caption:"",images:a}),setTimeout(n.setState({postMade:!1}),2e3)})).catch((function(e){return console.log(e)}))}))})).catch((function(e){console.log("Error while uploading the file: ",e),console.log(e)}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.get_data_torender=Object(m.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.a.get("http://localhost:5000/createNewPost").then((function(e){console.log(e),n.setState({images:e.data})}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:V.a.get("http://localhost:5000/users").then((function(e){console.log(e),n.setState({users:e.data})}));case 9:case"end":return e.stop()}}),e,null,[[0,5]])}))),n.get_notifications=function(){var e=Object(m.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.a.get("http://localhost:5000/getNotifications/".concat(t)).then((function(e){console.log("NOTIFICATIONS!"),console.log(e)})).catch((function(e){return console.log(e)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),n.updateForm=function(e){n.setState(Object(i.a)({},e.currentTarget.name,e.currentTarget.value))},n.changeImgUrl=function(e){n.setState({imageUrl:e})},n.changeFile=function(e){console.log(e),e.size<=10485760?n.setState({imageFile:e,message:""}):n.setState({message:"File size is too big!"})},n.makeNewUser=function(e){if(e.preventDefault(),0!==n.state.imageFile.length){var t=new FormData;t.append("imageUrl",n.state.imageFile),K.handleUpload(t).then((function(e){console.log("response is: ",e),n.setState({imagePost:e.imageUrl},(function(){V.a.post("http://localhost:5000/auth/signup",n.state,{withCredentials:!0}).then((function(e){console.log("NEW USER!"),console.log(e),n.setState({finished:!0,username:"",email:"",password:"",imageUrl:"",imageFile:[]})})).catch((function(e){return console.log(e)}))}))})).catch((function(e){console.log("Error while uploading the file: ",e)}))}else V.a.post("http://localhost:5000/auth/signup",n.state,{withCredentials:!0}).then((function(e){console.log("NEW USER!"),console.log(e),n.setState({finished:!0,username:"",email:"",password:"",imageUrl:"",imageFile:[]})})).catch((function(e){return console.log(e)}))},n.loginUser=function(e){e.preventDefault(),V.a.post("http://localhost:5000/auth/login",n.state,{withCredentials:!0}).then((function(e){console.log(e.data.userDoc);var t=e.data.userDoc;n.syncCurrentUser(t),n.setState({username:"",password:""}),alert("You are logged in."),setTimeout((function(){n.get_notifications(t._id)}),500)})).catch((function(e){console.log(e)}))},n.logoutUser=function(){V.a.delete("http://localhost:5000/auth/logout",{withCredentials:!0}).then((function(e){console.log("DISCONNECTED!"),console.log(e),n.syncCurrentUser(null),n.setState({currentUser:null})}))},n.handleLike=function(e){V.a.post("http://localhost:5000/updateLikes/".concat(e),n.state.currentUser,{withCredentials:!0}).then((function(e){console.log(e);var t=e.data.thePost,a=Object(u.a)(n.state.images),r=a.findIndex((function(e){return e._id===t._id}));console.log(a[r]),a[r].likes=t.likes,n.setState({images:a},(function(){console.log(n.state.images)}))})).catch((function(e){return console.log(e)}))},n.handleDelete=function(e){console.log(e);var t=Object(u.a)(n.state.images),a=t.findIndex((function(t){return t._id===e}));console.log(a),t.splice(a,1),n.setState({images:t,showConfirm:!1}),V.a.post("http://localhost:5000/delete/".concat(e)).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))},n.confirmDelete=function(e){n.setState({showConfirm:!0})},n.cancelDelete=function(e){n.setState({showConfirm:!1})},n.editPost=function(e,t){e.preventDefault();var a=Object(u.a)(n.state.images),r=a.findIndex((function(e){return e._id===t}));a[r].modal=!a[r].modal,n.setState({images:a})},n.updatePost=function(e,t){e.preventDefault();var a=n.state,r=a.caption,l=a.tags;console.log(r);var o=Object(u.a)(n.state.images),i=o.indexOf(t),c="",s=[];s=l,0===(c=r).length&&(console.log("THERE IS NOTHING!"),c=o[i].caption),0===s.length?s=o[i].tags:(o[i].caption=r,o[i].tags=[l]),console.log(s),console.log(c),o[i].modal=!o[i].modal,n.setState({images:o},(function(){return V.a.put("http://localhost:5000/updatePost/".concat(t._id),{caption:c,tags:s}).then((function(e){n.setState({caption:"",tags:[]}),window.location="/post/".concat(t._id)})).catch((function(e){return console.log("A problem happened getting the values!")}))}))},n.showEditUser=function(){n.setState({showEdit:!n.state.showEdit},(function(){console.log(n.state.showEdit)}))},n.updateUser=function(e,t){e.preventDefault();var a=n.state,r=a.bio,l=a.imageFile,o=a.currentUser;if(console.log(n.state.bio),console.log(n.state.imageFile),0!==n.state.imageFile.length){var i=new FormData;i.append("imageUrl",n.state.imageFile),K.handleUpload(i).then((function(e){console.log("response is: ",e),n.setState({imagePost:e.imageUrl},(function(){V.a.put("http://localhost:5000/auth/updateUser/".concat(o._id),{bio:r,imageFile:n.state.imagePost,currentUser:o},{withCredentials:!0}).then((function(e){console.log("PROFILE UPDATED!"),console.log(e.data);var t=Object(u.a)(n.state.users),a=e.data,r=a.bio,l=a.imageUrl,i=t.findIndex((function(e){return e._id===o._id}));t[i].bio=r,t[i].imageUrl=l,n.setState({users:t,imageUrl:"",imageFile:[],showEdit:!n.state.showEdit}),window.location="/profile/".concat(o._id)})).catch((function(e){return console.log(e)}))}))})).catch((function(e){console.log("Error while uploading the file: ",e)}))}else V.a.put("http://localhost:5000/auth/updateUser/".concat(o._id),{bio:r,imageFile:l,currentUser:o},{withCredentials:!0}).then((function(e){console.log("PROFILE UPDATED!"),console.log(e.data);var t=Object(u.a)(n.state.users),a=e.data.bio,r=t.findIndex((function(e){return e._id===o._id}));t[r].bio=a,n.setState({users:t,imageUrl:"",imageFile:[],showEdit:!n.state.showEdit}),window.location.reload()})).catch((function(e){return console.log(e)}))},n.handleFollow=function(e){console.log(e);var t=n.state.currentUser;V.a.post("http://localhost:5000/follow/".concat(e),t).then((function(a){console.log(a.data),console.log(t._id);var r=Object(u.a)(n.state.users),l=a.data.theUsers,o=l[l.findIndex((function(e){return e._id===t._id}))],i=l[l.findIndex((function(t){return t._id===e}))];console.log(o),console.log(i);var c=r.findIndex((function(e){return e._id===o._id}));console.log(c);var s=r.findIndex((function(e){return e._id===i._id}));console.log(s),r[c].followers=o.followers,r[c].following=o.following,r[s].followers=i.followers,r[s].following=i.following,console.log("NEW USER LIST"),console.log(r),n.setState({users:r})}))},n.handleComment=function(e,t){e.preventDefault(),console.log(n.state.comment),console.log(t);var a={owner:n.state.currentUser,message:n.state.comment},r=Object(u.a)(n.state.images);console.log(r.findIndex((function(e){return e._id===t})));var l=r.findIndex((function(e){return e._id===t}));l>=0&&r[l].comments.push({user:n.state.currentUser._id,comment:n.state.comment}),n.setState({images:r,comment:""}),V.a.put("http://localhost:5000/addComment/".concat(t),a).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))},n}return Object(f.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(m.a)(s.a.mark((function e(){var t=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get_data_torender();case 2:V.a.get("http://localhost:5000/auth/loggedin",{withCredentials:!0}).then((function(e){var n=e.data.userDoc;console.log(n),t.syncCurrentUser(n),setTimeout((function(){t.get_notifications(n._id)}),500)})).catch((function(e){return console.log("Error while getting the user from the loggedin route ",e)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"syncCurrentUser",value:function(e){this.setState({currentUser:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App"},r.a.createElement(Y,{currentUser:this.state.currentUser,logoutUser:this.logoutUser,lastUrl:this.state.lastUrl,queryInput:this.state.queryInput,onChangeValue:this.updateForm}),r.a.createElement(E.d,null,r.a.createElement(E.b,{exact:!0,path:"/",component:D}),r.a.createElement(E.b,{exact:!0,path:"/world",render:function(t){return r.a.createElement(q,Object.assign({},t,{allPosts:e.state.images,renderPosts:e.worldRender,handleLike:e.handleLike,currentUser:e.state.currentUser,query:e.state.queryInput}))}}),r.a.createElement(E.b,{exact:!0,path:"/theImg",render:function(t){return r.a.createElement(O,Object.assign({},t,{myUrl:e.state.images}))}}),r.a.createElement(E.b,{exact:!0,path:"/home",render:function(t){return r.a.createElement(B,Object.assign({},t,{allPosts:e.state.images,currentUser:e.state.currentUser,handleLike:e.handleLike}))}}),r.a.createElement(E.b,{exact:!0,path:"/newPost",render:function(t){return r.a.createElement(S,Object.assign({},t,{handleSubmit:e.postNewExp,changeFile:e.changeFile,changeUrl:e.changeImgUrl,onChangeValue:e.updateForm,formValues:e.state}))}}),r.a.createElement(E.b,{exact:!0,path:"/signup",render:function(t){return r.a.createElement(I,Object.assign({},t,{onChangeValue:e.updateForm,changeFile:e.changeFile,handleSubmit:e.makeNewUser,currentUser:e.state.currentUser,onUserChange:function(t){return e.syncCurrentUser(t)},formValues:e.state}))}}),r.a.createElement(E.b,{exact:!0,path:"/login",render:function(t){return r.a.createElement(F,Object.assign({},t,{onChangeValue:e.updateForm,handleSubmit:e.loginUser,currentUser:e.state.currentUser,formValues:e.state}))}}),r.a.createElement(E.b,{exact:!0,path:"/post/:id",render:function(t){return r.a.createElement(O,Object.assign({},t,{postValues:e.state.images,handleLike:e.handleLike,currentUser:e.state.currentUser,onChangeValue:e.updateForm,comment:e.state.comment,handleComment:e.handleComment}))}}),r.a.createElement(E.b,{exact:!0,path:"/followers/:id",render:function(t){return r.a.createElement(T,Object.assign({},t,{allUsers:e.state.users}))}}),r.a.createElement(E.b,{exact:!0,path:"/following/:id",render:function(t){return r.a.createElement(R,Object.assign({},t,{allUsers:e.state.users}))}}),r.a.createElement(E.b,{exact:!0,path:"/profile/:id",render:function(t){return e.state.currentUser?r.a.createElement(j,Object.assign({},t,{images:e.state.images,currentUser:e.state.currentUser,users:e.state.users,showEdit:e.state.showEdit,confirmDelete:e.confirmDelete,onLogout:e.logoutUser,onDelete:e.handleDelete,cancelDelete:e.cancelDelete,showConfirm:e.state.showConfirm,handleFollow:e.handleFollow,handleEdit:e.editPost,onChangeValue:e.updateForm,handleEditProfile:e.showEditUser,changeFile:e.changeFile,updateUser:e.updateUser,updatePost:e.updatePost})):r.a.createElement(E.a,{to:"/login"})}})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(x.a,null,r.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},55:function(e,t,n){},80:function(e,t,n){e.exports=n(127)},86:function(e,t,n){}},[[80,1,2]]]);
//# sourceMappingURL=main.f0f739bb.chunk.js.map